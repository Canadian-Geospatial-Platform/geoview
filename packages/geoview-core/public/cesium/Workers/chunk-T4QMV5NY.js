/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.128
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */
import{a as y,b as P,d as B}from"./chunk-V3YO6LNK.js";import{a as L}from"./chunk-XAJAI4KM.js";import{b as q}from"./chunk-Y5QCE4LD.js";import{e as T}from"./chunk-V7XFDMXL.js";function X(t){let a=t._uSquared,i=t._ellipsoid.maximumRadius,n=t._ellipsoid.minimumRadius,e=(i-n)/i,s=Math.cos(t._startHeading),h=Math.sin(t._startHeading),r=(1-e)*Math.tan(t._start.latitude),d=1/Math.sqrt(1+r*r),o=d*r,u=Math.atan2(r,s),c=d*h,l=c*c,M=1-l,_=Math.sqrt(M),g=a/4,f=g*g,p=f*g,m=f*f,q=1+g-3*f/4+5*p/4-175*m/64,v=1-g+15*f/8-35*p/8,H=1-3*g+35*f/4,O=1-5*g,y=q*u-v*Math.sin(2*u)*g/2-H*Math.sin(4*u)*f/16-O*Math.sin(6*u)*p/48-5*Math.sin(8*u)*m/512,P=t._constants;P.a=i,P.b=n,P.f=e,P.cosineHeading=s,P.sineHeading=h,P.tanU=r,P.cosineU=d,P.sineU=o,P.sigma=u,P.sineAlpha=c,P.sineSquaredAlpha=l,P.cosineSquaredAlpha=M,P.cosineAlpha=_,P.u2Over4=g,P.u4Over16=f,P.u6Over64=p,P.u8Over256=m,P.a0=q,P.a1=v,P.a2=H,P.a3=O,P.distanceRatio=y}function Y(t,a){return t*a*(4+t*(4-3*a))/16}function k(t,a,i,n,e,s,h){let r=Y(t,i);return(1-r)*t*a*(n+r*e*(h+r*s*(2*h*h-1)))}function Z(t,a,i,n,e,s,h){let r,d,o,u,c,l=(a-i)/a,M=s-n,_=Math.atan((1-l)*Math.tan(e)),g=Math.atan((1-l)*Math.tan(h)),f=Math.cos(_),p=Math.sin(_),m=Math.cos(g),q=Math.sin(g),v=f*m,H=f*q,O=p*q,y=p*m,P=M,b=L.TWO_PI,E=Math.cos(P),A=Math.sin(P);do{E=Math.cos(P),A=Math.sin(P);let t,a=H-y*E;o=Math.sqrt(m*m*A*A+a*a),d=O+v*E,r=Math.atan2(o,d),0===o?(t=0,u=1):(t=v*A/o,u=1-t*t),b=P,c=d-2*O/u,isFinite(c)||(c=0),P=M+k(l,t,u,r,o,d,c)}while(Math.abs(P-b)>L.EPSILON12);let S=u*(a*a-i*i)/(i*i),T=S*(256+S*(S*(74-47*S)-128))/1024,U=c*c,w=i*(1+S*(4096+S*(S*(320-175*S)-768))/16384)*(r-T*o*(c+T*(d*(2*U-1)-T*c*(4*o*o-3)*(4*U-3)/6)/4)),x=Math.atan2(m*A,H-y*E),R=Math.atan2(f*A,H*E-y);t._distance=w,t._startHeading=x,t._endHeading=R,t._uSquared=S}var $=new y,x=new y;function N(t,a,i,n){let e=y.normalize(n.cartographicToCartesian(a,x),$),s=y.normalize(n.cartographicToCartesian(i,x),x);q.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(y.angleBetween(e,s))-Math.PI),.0125),Z(t,n.maximumRadius,n.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=P.clone(a,t._start),t._end=P.clone(i,t._end),t._start.height=0,t._end.height=0,X(t)}function E(t,a,i){let n=i??B.default;this._ellipsoid=n,this._start=new P,this._end=new P,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,T(t)&&T(a)&&N(this,t,a,n)}Object.defineProperties(E.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return q.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return q.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return q.defined("distance",this._distance),this._endHeading}}}),E.prototype.setEndPoints=function(t,a){q.defined("start",t),q.defined("end",a),N(this,t,a,this._ellipsoid)},E.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},E.prototype.interpolateUsingSurfaceDistance=function(t,a){q.defined("distance",this._distance);let i=this._constants,n=i.distanceRatio+t/i.b,e=Math.cos(2*n),s=Math.cos(4*n),h=Math.cos(6*n),r=Math.sin(2*n),d=Math.sin(4*n),o=Math.sin(6*n),u=Math.sin(8*n),c=n*n,l=n*c,M=i.u8Over256,_=i.u2Over4,g=i.u6Over64,f=i.u4Over16,p=2*l*M*e/3+n*(1-_+7*f/4-15*g/4+579*M/64-(f-15*g/4+187*M/16)*e-(5*g/4-115*M/16)*s-29*M*h/16)+(_/2-f+71*g/32-85*M/16)*r+(5*f/16-5*g/4+383*M/96)*d-c*((g-11*M/2)*r+5*M*d/2)+(29*g/96-29*M/16)*o+539*M*u/1536,m=Math.asin(Math.sin(p)*i.cosineAlpha),v=Math.atan(i.a/i.b*Math.tan(m));p-=i.sigma;let H=Math.cos(2*i.sigma+p),O=Math.sin(p),y=Math.cos(p),b=i.cosineU*y,E=i.sineU*O,A=Math.atan2(O*i.sineHeading,b-E*i.cosineHeading)-k(i.f,i.sineAlpha,i.cosineSquaredAlpha,p,O,y,H);return T(a)?(a.longitude=this._start.longitude+A,a.latitude=v,a.height=0,a):new P(this._start.longitude+A,v,0)};var et=E;export{et as a};