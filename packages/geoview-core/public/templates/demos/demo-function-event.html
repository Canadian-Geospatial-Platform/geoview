<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>API Functions & Events - Canadian Geospatial Platform Viewer</title>
    <link rel="shortcut icon" href="./favicon.ico" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="./img/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <link href="https://fonts.googleapis.com/css?family=Roboto|Montserrat:200,300,400,900|Merriweather" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      li {
        padding-top: 5px;
        padding-bottom: 5px;
      }
      button {
        margin-top: 5px;
        margin-bottom: 5px;
        margin-right: 5px;
      }
    </style>
  </head>

  <body>
    <div class="header-table">
      <table>
        <tbody>
          <tr>
            <td><img class="header-logo" alt="logo" src="./img/Logo.png" /></td>
            <td class="header-title">
              <h1><strong>API Functions and Events</strong></h1>
            </td>
          </tr>
        </tbody>
      </table>
      <table>
        <tbody>
          <tr>
            <td>
              <a href="./index.html">Main</a><br />
            </td>
          </tr>
          <tr>
            <td><p>This page is used to test functions and events</p></td>
          </tr>
          </tr>
          <tr>
            <td>
              <a href="#HMap1">1. Basic Map</a><br />
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="map-title-holder">
      <h4 id="HMap1">1. Basic Map</h4>
      <a class="ref-link" href="#top">Top</a>
    </div>
    <button class="collapsible active">Map Status Flags</button>
    <pre id="HMap1-state" class="panel map-title-holder"></pre>
    <hr />
    <div
      id="Map1"
      class="geoview-map"
      data-lang="en"
      data-config-url="./configs/OSDP/function-event.json"
    ></div>
    <button type="button" class="collapsible">Code Snippet</button>
    <pre id="codeSnippet" class="panel"></pre>
    <hr />
    <div>
      <h3>API Functions:</h3>
      <ul>
        <li><button id="Add-layer">Add WMS layer</button><br />
          cgpv.api.maps.Map1.layer.addGeoviewLayer(config)
        </li>
        <li><button id="Remove-layer">Remove GeoJSON layer</button><br />
          cgpv.api.maps.Map1.layer.removeLayerUsingPath('geojsonLYR1/geojsonLYR1')
        </li>
        <li><button id="Remove-all-layers">Remove All layers</button><br />
          cgpv.api.maps.Map1.layer.removeAllGeoviewLayers()
        </li>
        <li><button id="Toggle-visibility">Toggle Top 100 visibility</button><br />
          cgpv.api.maps.Map1.layer.setOrToggleLayerVisibility('esriFeatureLYR5/0')
        </li>
        <li><button id="Set-all-visible">Set all layers visible</button><br />
          cgpv.api.maps.Map1.layer.setAllLayersVisibility(true)
        </li>
        <li><button id="Set-all-not-visible">Set all layers not visible</button><br />
          cgpv.api.maps.Map1.layer.setAllLayersVisibility(false)
        </li>
        <li><button id="Rename-layer">Rename Water Quantity layer</button><br />
          cgpv.api.maps.Map1.layer.setLayerName('uniqueValueId/1', 'Water Quantity')
        </li>
        <li><button id="Place-marker">Place a marker on map</button><br />
          cgpv.api.maps.Map1.clickMarkerIconShow({lnglat: [-90, 60]})
        </li>
        <li><button id="Zoom-extent">Zoom to an extent</button><br />
          cgpv.api.maps.Map1.zoomToLngLatExtentOrCoordinate([-87.77486341686723, 51.62285357468582, -84.57727128084842, 53.833354975551075])
        </li>
        <li><button id="Zoom-coordinate">Zoom to a coordinate</button><br />
          cgpv.api.maps.Map1.zoomToLngLatExtentOrCoordinate([-90, 60])
        </li>
        <li><button id="Extent-to-polygon">Convert an extent to a polygon (result in console)</button><br />
          cgpv.api.utilities.geo.extentToPolygon([-87.77486341686723, 51.62285357468582, -84.57727128084842, 53.83335497555107])
        </li>
        <li><button id="Polygon-to-extent">Convert a polygon to an extent (result in console)</button><br />
          cgpv.api.utilities.geo.polygonToExtent(polygon)
        </li>
        <li><button id="Redefine-alias-fields">Redefine alias fields for polygons layer</button><br />
          cgpv.api.maps.Map1.layer.redefineFeatureFields('geojsonLYR1/geojsonLYR1/polygons.json', 'Location Province,Date Created,Images', 'aliasFields')
        </li>
        <li><button id="Open-details">Open details tab in footer</button><br />
          cgpv.api.maps.Map1.footerBarApi.selectTab('details')
        </li>
        <li><button id="Open-geolocator">Open geolocator in app bar</button><br />
          cgpv.api.maps.Map1.appBarApi.selectAppBarTab('AppbarPanelButtonGeolocator', 'geolocator')
        </li>
        <li><button id="Disable-hover">Disable hover query for Top 100</button><button id="Enable-hover">Enable hover query for Top 100</button><br />
          cgpv.api.maps.Map1.layer.hoverFeatureInfoLayerSet.disableHoverListener('esriFeatureLYR5/0')
          cgpv.api.maps.Map1.layer.hoverFeatureInfoLayerSet.enableHoverListener('esriFeatureLYR5/0')
        </li>
        <li><button id="Disable-feature-info">Disable feature query for Top 100</button><button id="Enable-feature-info">Enable feature query for Top 100</button><br />
          cgpv.api.maps.Map1.layer.featureInfoLayerSet.disableClickListener('esriFeatureLYR5/0')
          cgpv.api.maps.Map1.layer.featureInfoLayerSet.enableClickListener('esriFeatureLYR5/0')
        </li>
        <li><button id="Show-collapsed-state">Show collapsed legend state for Water Quantity</button><br />
          cgpv.api.maps.Map1.stateApi.getLegendCollapsedState('uniqueValueId/1');
        </li>
        <li><button id="Toggle-collapse">Toggle legend collapsed state for Water Quantity</button><br />
          cgpv.api.maps.Map1.stateApi.setLegendCollapsedState('uniqueValueId/1');
        </li>
        <li><button id="Show-layer-info">Show layer info</button><br />
          cgpv.api.maps.Map1.getMapLayerOrderInfo()
        </li>
        <li><button id="Language-en">Change language to English</button><button id="Language-fr">Change language to French</button><br />
          cgpv.api.maps.Map1.getMapLayerOrderInfo()
        </li>
        <li><button id="Change-basemap">Change basemap</button><br />
          const basemap = await cgpv.api.maps.Map1.basemap.createCoreBasemap(basemapOptions = {basemapId: 'simple'})
          cgpv.api.maps.Map1.basemap.setBasemap(basemap)
        </li>
        <li><button id="Set-layer">Set selected layer in layers panel to Nonmetal mines</button><br />
          cgpv.api.maps.Map1.stateApi.setSelectedLayersTabLayer('nonmetalmines/5')
        </li>
        <li><button id="Swiper-add">Add Nonmetal mines to swiper</button><button id="Swiper-remove">Remove Nonmetal mines from swiper</button><br />
          cgpv.api.maps.Map1.plugins['swiper'].activateForLayer('nonmetalmines/5')
          cgpv.api.maps.Map1.plugins['swiper'].deActivateForLayer('nonmetalmines/5')
        </li>
      </ul>
      <h3>Events that will generate notifications:</h3>
      <ul>
        <li>onLayerAdded</li>
        <li>onLayerRemoved</li>
        <li>onLayersLoaded</li>
        <li>onLayerLoaded for Nonmetal mines</li>
        <li>onVisibleChanged for Water Quantity</li>
        <li>onLayerItemVisibilityToggled</li>
        <li>onMapZoomEnd</li>
        <li>onMapMoveEnd</li>
        <li>onLayerStatusChanged for Water Quantity</li>
        <li>onLayerFilterApplied for Water Quantity</li>
        <li>onMapLanguageChanged</li>
        <li>onBasemapChanged</li>
        <li>onLayersReordered</li>
        <li>onLayerOpacityChanged for Water Quantity</li>
      </ul>
    </div>
    <br>

    <script src="codedoc.js"></script>
    <script src="layerlib.js"></script>
    <script>
      // initialize cgpv and api events, a callback is optional, used if calling api's after the rendering is ready
      cgpv.init(async (mapId) => {
          listenToLegendLayerSetChanges('HMap1-state', 'Map1');

        // Events=====================================================================================================================
        // listen to layer added event
        cgpv.api.maps.Map1.layer.onLayerAdded((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(payload.layer.geoviewLayerId + ' added');
        });

        // listen to layer loaded events
        cgpv.api.maps.Map1.layer.onLayerLoaded((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(payload.layerPath + ' loaded');
        });

        // listen to layer error events
        cgpv.api.maps.Map1.layer.onLayerError((sender, payload) => {
          // NOTE: The event added layer will be trigger first as the layer, even in error, has been added to ui 
          cgpv.api.maps.Map1.notifications.addNotificationError(payload.layerPath + ' error');
        });

        // listen to individual layer loaded event
        cgpv.api.maps.Map1.layer.getGeoviewLayer('nonmetalmines/5').onIndividualLayerLoaded((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess('Nonmetal mines has finished loading');
          console.log(sender.olRootLayer.getSource().getFeatures());
        });

        // listen to layer removed event
        cgpv.api.maps.Map1.layer.onLayerRemoved((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(payload.layerPath + ' removed');
        });

        // listen to layer visibility changed event (individual geoview layer)
        cgpv.api.maps.Map1.layer.getGeoviewLayer('uniqueValueId/1').onVisibleChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`uniqueValueId/1 visibility set to ${payload.visible}`);
        });

        // listen to layer visibility changed event (individual geoview layer)
        cgpv.api.maps.Map1.layer.getGeoviewLayer('rcs.f4c51eaa-a6ca-48b9-a1fc-b0651da20509.en').onVisibleChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`layer ${payload.layerPath} visibility set to ${payload.visible}`);
        });

        // listen to layer item visibility changed event (any layers)
        cgpv.api.maps.Map1.layer.onLayerVisibilityToggled((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`layer ${payload.layerPath} visibility set to ${payload.visibility}`);
        });

        // listen to layer item visibility changed event (any layers)
        cgpv.api.maps.Map1.layer.onLayerItemVisibilityToggled((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`${payload.itemName} on layer ${payload.layerPath} visibility set to ${payload.visibility}`);
        });

        // listen to map zoom event
        cgpv.api.maps.Map1.onMapZoomEnd((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Zoomed to level ${payload.zoom}`);
        });

        // listen to map move event
        cgpv.api.maps.Map1.onMapMoveEnd((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Map moved to center latitude ${payload.lnglat[1]} and longitude ${payload.lnglat[0]}`);
        });

        // listen to layer status change event
        cgpv.api.maps.Map1.layer.getLayerEntryConfig('uniqueValueId/1').onLayerStatusChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`uniqueValueId/1 status changed to ${payload.layerStatus}`);
        });

        // listen to layer filter applied event
        cgpv.api.maps.Map1.layer.getGeoviewLayerHybrid('uniqueValueId/1').onLayerFilterApplied((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Filter ${payload.filter} applied to ${payload.layerPath}`);
        });

        // listen to map language changed event
        cgpv.api.maps.Map1.onMapLanguageChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Map language changed to ${payload.language}`);
        });

        // listen to basemap changed event
        cgpv.api.maps.Map1.basemap.onBasemapChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Basemap changed to ${payload.basemap.basemapId}`);
        });

        // listen to layer reordered event
        cgpv.api.maps.Map1.stateApi.onLayersReordered((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`Layers reordered to ${payload.orderedLayers.map((layer) => layer.layerPath)}`);
        });

        // listen to layer opacity changed event
        cgpv.api.maps.Map1.layer.getGeoviewLayer('uniqueValueId/1').onLayerOpacityChanged((sender, payload) => {
          cgpv.api.maps.Map1.notifications.addNotificationSuccess(`${payload.layerPath} opacity changed to ${payload.opacity}`);
        });

      });

      // Add WMS Button======================================================================================================
      // find the button element by ID
      var addLayerButton = document.getElementById('Add-layer');
      const config =
        {
          'geoviewLayerId': 'wmsLYR1-msi',
          'geoviewLayerName': { 'en': 'MSI' },
          'metadataAccessPath': { 'en': 'https://datacube.services.geo.ca/ows/msi' },
          'geoviewLayerType': 'ogcWms',
          'listOfLayerEntryConfig': [
            {
              'layerId': 'msi-94-or-more',
              'layerName': { 'en': 'Permanent Snow' },
              'source': {
                'style': 'msi-binary',
                'featureInfo': {
                  'queryable': true,
                  'nameField': { 'en': 'band-0-pixel-value', 'fr': 'band-0-pixel-value' },
                  'fieldTypes': 'number',
                  'outfields': { 'en': 'band-0-pixel-value', 'fr': 'band-0-pixel-value' },
                  'aliasFields':  { 'en': 'Pixel value', 'fr': 'Valeur du pixel' }
                }
              }
            }
          ]
        }

      // add an event listener when a button is clicked
      addLayerButton.addEventListener('click', async () => {
        const wmsLayerAlreadyExists = cgpv.api.maps.Map1.layer.getLayerEntryConfigIds().includes('wmsLYR1-msi/msi-94-or-more');
        if (!wmsLayerAlreadyExists) cgpv.api.maps.Map1.layer.addGeoviewLayer(config);
        else console.log('WMS layer already exists');
      });

      // Remove GeoJSON Button======================================================================================================
      // find the button element by ID
      var removeLayerButton = document.getElementById('Remove-layer');

      // add an event listener when a button is clicked
      removeLayerButton.addEventListener('click', async () => {
        const geojsonLayerAlreadyExists = cgpv.api.maps.Map1.layer.getLayerEntryConfigIds().includes('geojsonLYR1/geojsonLYR1');
        if (geojsonLayerAlreadyExists) cgpv.api.maps.Map1.layer.removeLayerUsingPath('geojsonLYR1/geojsonLYR1');
        else console.log('GeoJSON layer does not exist');
      });

      // Remove All Button==========================================================================================================
      // find the button element by ID
      var removeAllLayersButton = document.getElementById('Remove-all-layers');

      // add an event listener when a button is clicked
      removeAllLayersButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.removeAllGeoviewLayers();
      });

      // Toggle Visibility Button===================================================================================================
      // find the button element by ID
      var toggleVisibilityButton = document.getElementById('Toggle-visibility');

      // add an event listener when a button is clicked
      toggleVisibilityButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.setOrToggleLayerVisibility('esriFeatureLYR5/0');
      });

      // Set All Visible Button=====================================================================================================
      // find the button element by ID
      var setAllVisibleButton = document.getElementById('Set-all-visible');

      // add an event listener when a button is clicked
      setAllVisibleButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.setAllLayersVisibility(true);
      });

      // Set All Not Visible Button=================================================================================================
      // find the button element by ID
      var setAllNotVisibleButton = document.getElementById('Set-all-not-visible');

      // add an event listener when a button is clicked
      setAllNotVisibleButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.setAllLayersVisibility(false);
      });

      // Rename Layer Button========================================================================================================
      // find the button element by ID
      var renameLayerButton = document.getElementById('Rename-layer');

      // add an event listener when a button is clicked
      renameLayerButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.setLayerName('uniqueValueId/1', 'Water Quantity')
      });

      // Place Marker Button========================================================================================================
      // find the button element by ID
      var placeMarkerButton = document.getElementById('Place-marker');

      // add an event listener when a button is clicked
      placeMarkerButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.clickMarkerIconShow({lnglat: [-90, 60]});
      });

      // Zoom to Extent Button========================================================================================================
      // find the button element by ID
      var zoomExtentButton = document.getElementById('Zoom-extent');

      // add an event listener when a button is clicked
      zoomExtentButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.zoomToLngLatExtentOrCoordinate([-87.77486341686723, 51.62285357468582, -84.57727128084842, 53.833354975551075]);
      });

      // Zoom to Coordinate Button========================================================================================================
      // find the button element by ID
      var zoomCoordinateButton = document.getElementById('Zoom-coordinate');

      // add an event listener when a button is clicked
      zoomCoordinateButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.zoomToLngLatExtentOrCoordinate([-90, 60]);
      });

      // Extent to Polygon Button========================================================================================================
      // find the button element by ID
      var extentToPolygonButton = document.getElementById('Extent-to-polygon');

      // add an event listener when a button is clicked
      extentToPolygonButton.addEventListener('click', async () => {
        console.log(cgpv.api.utilities.geo.extentToPolygon([-87.77486341686723, 51.62285357468582, -84.57727128084842, 53.833354975551075]));
      });

      // Polygon to Extent Button========================================================================================================
      // find the button element by ID
      var polygonToExtentButton = document.getElementById('Polygon-to-extent');

      const polygon = cgpv.api.utilities.geo.extentToPolygon([-87.77486341686723, 51.62285357468582, -84.57727128084842, 53.833354975551075]);

      // add an event listener when a button is clicked
      polygonToExtentButton.addEventListener('click', async () => {
        console.log(cgpv.api.utilities.geo.polygonToExtent(polygon));
      });

      // Redefine alias fields Button========================================================================================================
      // find the button element by ID
      var redefineAliasFieldsButton = document.getElementById('Redefine-alias-fields');

      // add an event listener when a button is clicked
      redefineAliasFieldsButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.redefineFeatureFields('geojsonLYR1/geojsonLYR1/polygons.json', 'Location Province,Date Created,Images', 'aliasFields')
      });

      // Open details Button========================================================================================================
      // find the button element by ID
      var openDetailsButton = document.getElementById('Open-details');

      // add an event listener when a button is clicked
      openDetailsButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.footerBarApi.selectTab('details')
      });

      // Open geolocator Button========================================================================================================
      // find the button element by ID
      var openGeolocatorButton = document.getElementById('Open-geolocator');

      // add an event listener when a button is clicked
      openGeolocatorButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.appBarApi.selectAppBarTab('AppbarPanelButtonGeolocator', 'geolocator')
      });

      // Disable hover Button========================================================================================================
      // find the button element by ID
      var disableHoverButton = document.getElementById('Disable-hover');

      // add an event listener when a button is clicked
      disableHoverButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.hoverFeatureInfoLayerSet.disableHoverListener('esriFeatureLYR5/0')
      });

      // Enable hover Button========================================================================================================
      // find the button element by ID
      var enableHoverButton = document.getElementById('Enable-hover');

      // add an event listener when a button is clicked
      enableHoverButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.hoverFeatureInfoLayerSet.enableHoverListener('esriFeatureLYR5/0')
      });

      // Disable feature info Button=================================================================================================
      // find the button element by ID
      var disableFeatureInfoButton = document.getElementById('Disable-feature-info');

      // add an event listener when a button is clicked
      disableFeatureInfoButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.featureInfoLayerSet.disableClickListener('esriFeatureLYR5/0')
      });

      // Enable feature info Button==================================================================================================
      // find the button element by ID
      var enableFeatureInfoButton = document.getElementById('Enable-feature-info');

      // add an event listener when a button is clicked
      enableFeatureInfoButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.layer.featureInfoLayerSet.enableClickListener('esriFeatureLYR5/0')
      });

      // Enable show collapsed state Button==========================================================================================
      // find the button element by ID
      var showCollapsedStateButton = document.getElementById('Show-collapsed-state');

      // add an event listener when a button is clicked
      showCollapsedStateButton.addEventListener('click', async () => {
        console.log(cgpv.api.maps.Map1.stateApi.getLegendCollapsedState('uniqueValueId/1'))
      });

      // Enable toggle collapse state Button==========================================================================================
      // find the button element by ID
      var toggleCollapseButton = document.getElementById('Toggle-collapse');

      // add an event listener when a button is clicked
      toggleCollapseButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.stateApi.setLegendCollapsedState('uniqueValueId/1')
      });

      // Enable show layer info Button================================================================================================
      // find the button element by ID
      var showLayerInfoButton = document.getElementById('Show-layer-info');

      // add an event listener when a button is clicked
      showLayerInfoButton.addEventListener('click', async () => {
        console.log(cgpv.api.maps.Map1.getMapLayerOrderInfo())
      });

      // Enable language en Button================================================================================================
      // find the button element by ID
      var changeLanguageEnglishButton = document.getElementById('Language-en');

      // add an event listener when a button is clicked
      changeLanguageEnglishButton.addEventListener('click', async () => {
        console.log(cgpv.api.maps.Map1.setLanguage('en'));
      });

      // Enable language fr Button================================================================================================
      // find the button element by ID
      var changeLanguageFrenchButton = document.getElementById('Language-fr');

      // add an event listener when a button is clicked
      changeLanguageFrenchButton.addEventListener('click', async () => {
        console.log(cgpv.api.maps.Map1.setLanguage('fr'));
      });

      // Change basemap Button================================================================================================
      // find the button element by ID
      var changeBasemapButton = document.getElementById('Change-basemap');

      // add an event listener when a button is clicked
      changeBasemapButton.addEventListener('click', async () => {
        // Create basemap
        const basemap = await cgpv.api.maps.Map1.basemap.createCoreBasemap(basemapOptions = {basemapId: 'simple'});
        // Set on map
        cgpv.api.maps.Map1.basemap.setBasemap(basemap);
      });

      // Set layer Button================================================================================================
      // find the button element by ID
      var setLayerButton = document.getElementById('Set-layer');

      // add an event listener when a button is clicked
      setLayerButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.stateApi.setSelectedLayersTabLayer('nonmetalmines/5');
      });

      // Swiper add Button================================================================================================
      // find the button element by ID
      var swiperAddButton = document.getElementById('Swiper-add');

      // add an event listener when a button is clicked
      swiperAddButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.plugins['swiper'].activateForLayer('nonmetalmines/5');
      });

      // Swiper remove Button================================================================================================
      // find the button element by ID
      var swiperRemoveButton = document.getElementById('Swiper-remove');

      // add an event listener when a button is clicked
      swiperRemoveButton.addEventListener('click', async () => {
        cgpv.api.maps.Map1.plugins['swiper'].deActivateForLayer('nonmetalmines/5');
      });

      // create snippets
      window.addEventListener('load', () => {
        createCodeSnippet();
        createConfigSnippet();
      });

    </script>
  </body>
</html>
