{"version":3,"file":"corePackages/geoview-custom-legend.js","mappings":";u8CAUA,IAGMA,EAAuB,SAAAC,GAAA,SAAAD,IAAA,IAAAE,E,OAAAC,EAAAA,EAAAA,GAAA,KAAAH,GAAA,QAAAI,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAiF1B,O,EAjF0B,K,EAAAT,E,EAAA,GAAAU,OAAAH,G,aAAAL,G,8EAAAS,EAAAA,EAAAA,GAAAT,EAAA,kBAoEA,WACzB,OACEU,EAAAA,EAAAA,KAACC,EAAAA,EAAiB,CAChBC,OAAQZ,EAAKa,YACbC,eAAgB,SAACC,GACf,IAAMC,EAAgBhB,EAAKa,YAC3Bb,EAAKiB,UAASC,EAAAA,EAAC,CAAC,EACXF,GAAa,IAChBD,WAAAA,IAEJ,GAGN,GAACf,CAAA,QAAAmB,EAAAA,EAAAA,GAAArB,EAAAC,IAAAqB,EAAAA,EAAAA,GAAAtB,EAAA,EAAAuB,IAAA,SAAAC,MA3ED,WACE,OAAOC,CACT,GAEA,CAAAF,IAAA,gBAAAC,MAKA,WACE,OAAOE,CACT,GAEA,CAAAH,IAAA,sBAAAC,MAIA,WACE,MAAO,CACLG,GAAI,CACFC,aAAc,CACZC,MAAO,kBAGXC,GAAI,CACFF,aAAc,CACZC,MAAO,0BAIf,GAEA,CAAAN,IAAA,YAAAC,MAIA,WAEE,O,EAAAxB,E,EAAA,Y,EAAA,K,EAAA,E,wGAAA,I,aACF,GAAC,CAAAuB,IAAA,sBAAAC,MAED,WAEE,MAAO,CACLO,GAAI,gBACJC,QAAS,qBACTC,iBAAkB,QAClBC,UAAUtB,EAAAA,EAAAA,KAACuB,EAAAA,GAAU,IACrBC,SAAS,EAEb,GAAC,CAAAb,IAAA,uBAAAC,MAED,WAEE,MAAO,CACLK,MAAO,qBACPQ,MAAMzB,EAAAA,EAAAA,KAACuB,EAAAA,GAAU,IACjBG,MAAO,IACPC,OAAQC,KAAKzB,YAAY0B,OAE7B,GAAC,CAAAlB,IAAA,YAAAC,MAoBD,WAA4B,IAAC,CAtFF,CAASkB,EAAAA,GA8FlCC,IAAUC,OAAOC,KAAKC,eAAeC,QAEvCH,OAAOI,eAAiBJ,OAAOI,gBAAkB,CAAC,EAClDJ,OAAOI,eAAe,iBAAmBhD,G,kUCtGpC,IAAe0C,EAAY,SAAAO,GAAA,SAAAP,IAAA,IAAAxC,E,OAAAC,EAAAA,EAAAA,GAAA,KAAAuC,GAAA,QAAAtC,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAOhC,O,EAPgC,K,EAAAiC,E,EAAA,GAAAhC,OAAAH,G,aAAAL,G,8EAChCS,EAAAA,EAAAA,GAAAT,EAAA,uBAGAS,EAAAA,EAAAA,GAAAT,EAAA,uBAGAS,EAAAA,EAAAA,GAAAT,EAAA,qBAAAA,CAAA,QAAAmB,EAAAA,EAAAA,GAAAqB,EAAAO,IAAA3B,EAAAA,EAAAA,GAAAoB,EAAA,EAAAnB,IAAA,YAAAC,MAQA,WACE,O,EAAAkB,E,EAAA,Y,EAAA,K,EAAA,E,wGAAA,I,aACF,GAEA,CAAAnB,IAAA,sBAAAC,MAIA,WAIE,IACQ0B,EADSN,OAATC,KACiBM,GAAGC,SAApBF,QAGR,MAAO,CACLnB,GAAI,mBACJC,QAAS,eACTC,iBAAkB,QAClBC,SAAUM,KAAKO,MAAMM,cAAcH,GACnCd,SAAS,EAEb,GAEA,CAAAb,IAAA,uBAAAC,MAIA,WAIE,MAAO,CACLK,MAAO,aACPQ,KAAM,oCACNC,MAAO,OACPC,OAAQC,KAAKzB,YAAY0B,OAE7B,GAEA,CAAAlB,IAAA,kBAAAC,MAIA,WAIE,OAAOgB,KAAKO,MAAMM,cAAc,WAAOC,EAAW,uCAAF5C,OAAyC8B,KAAKe,UAAUC,MAAK,iBAC/G,GAEA,CAAAjC,IAAA,QAAAC,MAGA,WAEEgB,KAAKiB,YAAcjB,KAAKkB,sBAGxBlB,KAAKmB,WAAanB,KAAKoB,uBAGvBpB,KAAKmB,WAAWE,QAAUrB,KAAKsB,kBAG/BtB,KAAKuB,YAAcvB,KAAKe,UAAUS,UAAUC,kBAAkBzB,KAAKiB,YAAajB,KAAKmB,kBAAeL,CACtG,GAEA,CAAA/B,IAAA,WAAAC,MAGA,WAEMgB,KAAKuB,aAEPvB,KAAKe,UAAUS,UAAUE,kBAAkB1B,KAAKuB,YAAYI,cAEhE,IAAC,CA7F+B,E,6BAASC,G,s6BCsB3C,IAAMC,EAAW,SAAHC,GAAA,IAAAC,EAAAD,EAAME,UAAAA,OAAS,IAAAD,EAAG,GAAEA,EAAAE,EAAAH,EAAEI,SAAAA,OAAQ,IAAAD,EAAG,SAAQA,EAAA,OACrD7D,EAAAA,EAAAA,KAAA,KAAG4D,UAAS,kBAAA9D,OAAoB8D,GAAaG,MAAO,CAAED,SAAAA,GAAWxC,SAAC,QAE9D,EAGA0C,EAAa,SAAHC,GAAA,IAAAC,EAAAD,EAAML,UAAAA,OAAS,IAAAM,EAAG,GAAEA,EAAAC,EAAAF,EAAEH,SAAAA,OAAQ,IAAAK,EAAG,SAAQA,EAAA,OACvDnE,EAAAA,EAAAA,KAAA,KAAG4D,UAAS,kBAAA9D,OAAoB8D,GAAaG,MAAO,CAAED,SAAAA,GAAWxC,SAAC,UAE9D,EAGA8C,EAAW,SAAHC,GAAA,IAAAC,EAAAD,EAAMT,UAAAA,OAAS,IAAAU,EAAG,GAAEA,EAAAC,EAAAF,EAAEP,SAAAA,OAAQ,IAAAS,EAAG,SAAQA,EAAA,OACrDvE,EAAAA,EAAAA,KAAA,KAAG4D,UAAS,kBAAA9D,OAAoB8D,GAAaG,MAAO,CAAED,SAAAA,GAAWxC,SAAC,QAE9D,EAGC,SAASrB,EAAkBuE,GAChC,IAAQtE,EAA2BsE,EAA3BtE,OAAQE,EAAmBoE,EAAnBpE,eACRC,EAAeH,EAAfG,WACRoE,EAAwC1C,EAAAA,SAA8B,MAAK2C,GAAAC,EAAAA,EAAAA,GAAAF,EAAA,GAApEG,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,EAAoC/C,EAAAA,SAAkC,MAAKgD,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAApEE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,EAA0CnD,EAAAA,UAAe,GAAMoD,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAAxDE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GAG9B5C,EADSP,OAATC,KACAM,GACR+C,EAAoH/C,EAAGC,SAA/G+C,EAAID,EAAJC,KAAMC,EAAGF,EAAHE,IAAKC,EAAMH,EAANG,OAAQC,EAASJ,EAATI,UAAWC,EAAUL,EAAVK,WAAYC,EAAMN,EAANM,OAAQC,EAAWP,EAAXO,YAAaC,EAAaR,EAAbQ,cAAeC,EAAaT,EAAbS,cAAeC,EAAUV,EAAVU,WAE/FC,EAAQ1D,EAAG2D,WACXC,GAAYC,EAAAA,EAAAA,GAAaH,GAEzBI,EAAetE,EAAAA,OAA+B,MAEpDuE,EAAsCvE,EAAAA,SAAuB,IAAGwE,GAAA5B,EAAAA,EAAAA,GAAA2B,EAAA,GAAzDE,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GAClCG,EAA0C3E,EAAAA,UAAwB,GAAM4E,GAAAhC,EAAAA,EAAAA,GAAA+B,EAAA,GAAjEE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GACtCG,EAAoC/E,EAAAA,SAAuB,IAAGgF,IAAApC,EAAAA,EAAAA,GAAAmC,EAAA,GAAvDE,GAAUD,GAAA,GAAEE,GAAaF,GAAA,GAChCG,GAA4CnF,EAAAA,SAAuB,IAAGoF,IAAAxC,EAAAA,EAAAA,GAAAuC,GAAA,GAA/DE,GAAcD,GAAA,GAAEE,GAAiBF,GAAA,GAElCG,GAAmB,SAACC,GACxB,IAAIC,EAAkC,KAElC5H,MAAM6H,QAAQF,KACKA,EAAKG,MACxB,SAACC,GAAI,MACa,YAAhBC,EAAAA,EAAAA,GAAOD,IACE,OAATA,GACA,gBAAiBA,IACf,cAAgBA,GAA2F,iBAA/CA,EAAiCE,WAC5F,YAAcF,GAAyF,iBAA7CA,EAAiCG,UACrC,iBAAjDH,EAAiCI,gBACtC,gBAAiBJ,IAAkE,iBAAjDA,EAAiCK,YAAyB,KAGjGR,EAAcD,EAAwCU,IAAI,SAACN,GAAI,MAAM,CACnEI,YAAaJ,EAAKI,YAClBF,UAAYF,EAAKE,WAAyBF,EAAKG,QAC/CE,YAAcL,EAAKK,aAA0B,GAC9C,KAIL,IAAKR,GAAcD,GAAwB,YAAhBK,EAAAA,EAAAA,GAAOL,IAAqB3H,MAAM6H,QAASF,EAAiCW,gBAAiB,CACtH,IAAMC,EAASZ,EAA4DW,eACtDC,EAAMT,MAAM,SAACU,GAAC,MAAkB,YAAbR,EAAAA,EAAAA,GAAOQ,IAAqC,iBAAZA,EAAEC,OAAwC,iBAAXD,EAAEE,IAAiB,KAExHd,EAAaW,EAAMF,IAAI,SAACG,GAAC,MAAM,CAC7BL,YAAaK,EAAEE,KACfT,UAAWO,EAAEC,MACbL,YAAa,GACd,GAEL,CAEA,OAAOR,CACT,EA2EAzF,EAAAA,UAAgB,WACd,IAAIwG,GAAY,EACVC,EAAQ,eAAAC,GAAAC,EAAAA,EAAAA,GAAAC,IAAAA,KAAG,SAAAC,EAAOC,GAAe,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3B,EAAA4B,EAAA,OAAAR,IAAAA,KAAA,SAAAS,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACfC,QAAQC,WAC5BX,EAAMZ,IAAI,SAACwB,GAAC,OACVC,MAAMD,GAAGE,KAAK,SAACC,GACb,OAAKA,EAAIC,GACFD,EAAIE,OAAOH,KAAK,SAACpC,GAAI,MAAM,CAAE2B,KAAMO,EAAGlC,KAAAA,EAAM,GAD/BgC,QAAQQ,QAE9B,EAAE,IAEL,OAPKjB,EAAOM,EAAAY,KASJjB,EAAI,EAAC,YAAEA,EAAID,EAAQpJ,QAAM,CAAA0J,EAAAE,KAAA,QACP,GACH,eADhBN,EAASF,EAAQC,IACZpH,OAAsB,CAAAyH,EAAAE,KAAA,QAEK,GAFLL,EACRD,EAAOpI,MAAtBsI,EAAID,EAAJC,KAAM3B,EAAI0B,EAAJ1B,OACR4B,EAAQ7B,GAAiBC,KACjBgB,EAAS,CAAAa,EAAAE,KAAA,QAIG,OAHpBlJ,GAAgBA,EAAe+I,GACnC1C,EAAewD,KAAKC,UAAU3C,EAAM,KAAM,IAC1ClC,GAAiB,GACjBgC,GAAkB6B,GAAME,EAAAe,OAAA,iBATMpB,IAAGK,EAAAE,KAAA,gCAAAF,EAAAgB,OAAA,EAAAxB,EAAA,IAcxC,gBAxBayB,GAAA,OAAA5B,EAAA6B,MAAA,KAAA7K,UAAA,KA4Bd,OAHK2F,GAAuC,IAAtB/E,EAAWX,QAC1B8I,EAAS,CAAC,oBAAqB,qBAAsB,wBAErD,WACLD,GAAY,CACd,CACF,EAAG,CAACnD,EAAe/E,EAAWX,OAAQU,IAEtC,IAYMmK,GAAoB,SAACC,EAAyB5J,GAC9CoE,GACFC,EAAazE,EAAAA,EAAC,CAAC,EACVwE,GAAU,IAAAjF,EAAAA,EAAAA,GAAA,GACZyK,EAAQ5J,IAGf,EAkBA,OACE6J,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAIvE,EAAUwE,WAAWrJ,SAAA,EAC5BmJ,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEjB,EAAG,EAAGmB,QAAS,OAAQC,eAAgB,gBAAiBC,IAAK,EAAGC,SAAU,QAASzJ,SAAA,EAC5FtB,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAEE,QAAS,OAAQE,IAAK,EAAGE,GAAI,GAAI1J,UAC1CmJ,EAAAA,EAAAA,MAAChF,EAAM,CAACwF,QAAQ,YAAYC,UAAU,QAAQC,QAAS,WAAF,IAAAC,EAAA,OAA4B,QAA5BA,EAAQ/E,EAAagF,eAAO,IAAAD,OAAA,EAApBA,EAAsBE,OAAO,EAAChK,SAAA,CAAC,eAE1FtB,EAAAA,EAAAA,KAAA,SAAOuL,KAAK,OAAOC,IAAKnF,EAAcoF,OAAO,QAAQ1H,MAAO,CAAE6G,QAAS,QAAUc,SApHlE,SAACC,GAAqD,IAAAC,EACvEC,EAAyB,QAArBD,EAAGD,EAAMG,OAAOC,aAAK,IAAAH,OAAA,EAAlBA,EAAqB,GAClC,GAAKC,EAAL,CAEA,IAAMG,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAACC,GACf,IAAI,IAAAC,EACIC,EAAsB,QAAXD,EAAGD,EAAEL,cAAM,IAAAM,OAAA,EAARA,EAAUpD,OACxBsD,EAAWrC,KAAKsC,MAAMF,GAG5B5F,EAAewD,KAAKC,UAAUoC,EAAU,KAAM,IAC9C,IAAM9E,EAAaF,GAAiBgF,GAEhC9E,EACEpH,IACFA,EAAeoH,GACfnC,GAAiB,GACjBgC,GAAkBwE,EAAKW,MAEnBnG,EAAagF,UACfhF,EAAagF,QAAQzK,MAAQ,KAIjC6L,EAAAA,GAAOC,SAAS,6BAEpB,CAAE,MAAOC,GACPF,EAAAA,GAAOC,SAAS,6BAA8BC,EAEhD,CACF,EACAX,EAAOY,QAAU,WACfH,EAAAA,GAAOC,SAAS,qBAClB,EACAV,EAAOa,WAAWhB,EAjCD,CAkCnB,SAmFOzG,GAAiB/E,EAAWX,OAAS,IACpC+K,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEoC,UAAW,SAAUC,MAAO,kBAAmBzL,SAAA,CACvDjB,EAAWX,OAAO,QAA4B,IAAtBW,EAAWX,OAAe,IAAM,GAAG,gBAKjEW,EAAWX,OAAS,GACnBM,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAEsC,UAAW,QAASC,UAAW,OAAQC,GAAI,GAAI5L,SACvDjB,EAAW4H,IAAI,SAACkF,EAAwBC,GAAa,OACpDpN,EAAAA,EAAAA,KAACuF,EAAI,CAEHmF,GAAI,CACFM,GAAI,EACJqC,SAAU,WACV,0BAA2B,CACzBC,QAAS,EACTC,WAAY,YAEdjM,UAEFtB,EAAAA,EAAAA,KAACwF,EAAG,CAAC5B,UAAU,wBAAwB8G,GAAI,CAAEjB,EAAG,GAAInI,UAClDmJ,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEE,QAAS,OAAQ4C,WAAY,SAAU1C,IAAK,GAAIxJ,SAAA,CACxD6L,EAAWtF,YACV7H,EAAAA,EAAAA,KAACwF,EAAG,CACF0F,UAAU,MACVuC,IAAKN,EAAWtF,UAChB6F,IAAI,GACJhD,GAAI,CACFhJ,MAAO,GACPiM,OAAQ,GACRC,UAAW,UACXC,OAAQ,iBACRC,aAAc,MAIpBrD,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEqD,KAAM,GAAIzM,SAAA,EACnBtB,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAEsD,WAAY,OAAQhD,GAAI,IAAM1J,SAAE6L,EAAWpF,cACrDoF,EAAWnF,cAAehI,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAE5G,SAAU,WAAYiJ,MAAO,kBAAmBzL,SAAE6L,EAAWnF,kBAErGyC,EAAAA,EAAAA,MAACjF,EAAG,CACF5B,UAAU,iBACV8G,GAAI,CACFE,QAAS,OACTE,IAAK,EACLwC,QAAS,EACTC,WAAY,SACZU,WAAY,iCACZ3M,SAAA,EAEFtB,EAAAA,EAAAA,KAAC2F,EAAU,CACTuI,KAAK,QACL/C,QAAS,SAACgB,GACRA,EAAEgC,kBApGA,SAACf,GACvBvI,EAAgBuI,GAChBnI,EAAazE,EAAC,CAAC,EAAIH,EAAW+M,IAChC,CAkGsBgB,CAAgBhB,EAClB,EACAnM,MAAM,OAAMK,UAEZtB,EAAAA,EAAAA,KAACyD,EAAQ,CAACK,SAAS,aAErB9D,EAAAA,EAAAA,KAAC2F,EAAU,CACTuI,KAAK,QACL/C,QAAS,SAACgB,GACRA,EAAEgC,kBAzGE,SAACf,GACzB,IAAMiB,EAAUhO,EAAWiO,OAAO,SAACC,EAAGxF,GAAC,OAAKA,IAAMqE,CAAK,GACnDhN,GACFA,EAAeiO,EAEnB,CAqGsBG,CAAkBpB,EACpB,EACAL,MAAM,QACN9L,MAAM,SAAQK,UAEdtB,EAAAA,EAAAA,KAACgE,EAAU,CAACF,SAAS,qBAIvB,eAAAhE,OA/DcqN,EAAWpF,YAAW,KAAAjI,OAAIqN,EAAWtF,WAgEpD,MAIX7H,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAEjB,EAAG,EAAGgF,UAAW,SAAU1B,MAAO,kBAAmBzL,SAC7D8F,GAAiB,WAAHtH,OAAcsH,IAAmB,4DAKpDqD,EAAAA,EAAAA,MAAC7E,EAAM,CACL8I,KAAuB,OAAjB9J,GAAwC,OAAfI,EAC/B2J,QAAS,WACP9J,EAAgB,MAChBI,EAAc,KAChB,EACA2J,SAAS,KACTC,WAAS,EAAAvN,SAAA,EAETtB,EAAAA,EAAAA,KAAC6F,EAAW,CAAAvE,SAAmB,OAAjBsD,GAAyBA,GAAgB,EAAI,mBAAqB,yBAChF5E,EAAAA,EAAAA,KAAC8F,EAAa,CAAAxE,UACZmJ,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEE,QAAS,OAAQkE,cAAe,SAAUhE,IAAK,EAAGiE,GAAI,GAAIzN,SAAA,EACnEtB,EAAAA,EAAAA,KAAC0F,EAAS,CACRsJ,MAAM,eACNpO,OAAOoE,aAAU,EAAVA,EAAY+C,cAAe,GAClC2D,SAAU,SAACS,GAAC,OAAK5B,GAAkB,cAAe4B,EAAEL,OAAOlL,MAAM,EACjEiO,WAAS,EACTI,OAAO,WAETjP,EAAAA,EAAAA,KAAC0F,EAAS,CACRsJ,MAAM,aACNpO,OAAOoE,aAAU,EAAVA,EAAY6C,YAAa,GAChC6D,SAAU,SAACS,GAAC,OAAK5B,GAAkB,YAAa4B,EAAEL,OAAOlL,MAAM,EAC/DiO,WAAS,EACTI,OAAO,WAETjP,EAAAA,EAAAA,KAAC0F,EAAS,CACRsJ,MAAM,cACNpO,OAAOoE,aAAU,EAAVA,EAAYgD,cAAe,GAClC0D,SAAU,SAACS,GAAC,OAAK5B,GAAkB,cAAe4B,EAAEL,OAAOlL,MAAM,EACjEiO,WAAS,EACTK,WAAS,EACTC,KAAM,EACNF,OAAO,WAERjK,aAAU,EAAVA,EAAY6C,aACX4C,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAE0E,GAAI,EAAGX,UAAW,UAAWnN,SAAA,EACtCtB,EAAAA,EAAAA,KAACwF,EAAG,CAACkF,GAAI,CAAEsD,WAAY,SAAUhD,GAAI,GAAI1J,SAAC,cAC1CtB,EAAAA,EAAAA,KAACwF,EAAG,CACF0F,UAAU,MACVuC,IAAKzI,EAAW6C,UAChB6F,IAAI,iBACJhD,GAAI,CACFkE,SAAU,OACV5B,UAAW,IACXa,OAAQ,iBACRpE,EAAG,EACHqE,aAAc,cAO1BrD,EAAAA,EAAAA,MAAC1E,EAAa,CAAAzE,SAAA,EACZtB,EAAAA,EAAAA,KAACyF,EAAM,CACL0F,QAAS,WACPtG,EAAgB,MAChBI,EAAc,KAChB,EAAE3D,SACH,YAGDtB,EAAAA,EAAAA,KAACyF,EAAM,CAAC0F,QA7KO,WACrB,GAAqB,OAAjBvG,GAAyBI,EAAY,CACvC,IAAMqJ,GAAOgB,EAAAA,EAAAA,GAAOhP,GAChBuE,GAAgB,GAAKA,EAAeyJ,EAAQ3O,OAC9C2O,EAAQzJ,GAAgBI,EAExBqJ,EAAQiB,KAAKtK,GAEX5E,GACFA,EAAeiO,GAEjBxJ,EAAgB,MAChBI,EAAc,KAChB,CACF,EA+JyCgG,QAAQ,YAAY8B,MAAM,UAAUwC,WAAWvP,EAAAA,EAAAA,KAACoE,EAAQ,IAAI9C,SAAC,eAKjGkF,IACCiE,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAE0E,GAAI,EAAG3F,EAAG,EAAG+F,UAAW,kBAAmBlO,SAAA,EACpDmJ,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEE,QAAS,OAAQC,eAAgB,gBAAiB2C,WAAY,SAAUxC,GAAI,GAAI1J,SAAA,EACzFtB,EAAAA,EAAAA,KAACgG,EAAU,CAACiF,QAAQ,KAAI3J,SAAC,iBACvBsF,GAGA6D,EAAAA,EAAAA,MAACjF,EAAG,CAACkF,GAAI,CAAEE,QAAS,OAAQE,IAAK,GAAIxJ,SAAA,EACnCtB,EAAAA,EAAAA,KAACyF,EAAM,CACLwF,QAAQ,YACR8B,MAAM,UACNmB,KAAK,QACLqB,WAAWvP,EAAAA,EAAAA,KAACoE,EAAQ,CAACN,SAAS,UAC9BqH,QA3TO,WACrB,IACE,IAAMsE,EAAaxF,KAAKsC,MAAMvF,IACxBQ,EAAaF,GAAiBmI,GAEhCjI,EACEpH,IACFA,EAAeoH,GACff,EAAewD,KAAKC,UAAUuF,EAAY,KAAM,IAChD5I,GAAiB,IAGnB4F,EAAAA,GAAOC,SACL,8HAGN,CAAE,MAAOC,GACPF,EAAAA,GAAOC,SAASC,aAAiB+C,MAAQ/C,EAAMgD,QAAUhD,EAC3D,CACF,KA0Sc3M,EAAAA,EAAAA,KAACyF,EAAM,CAACwF,QAAQ,WAAWiD,KAAK,QAAQ/C,QAxS7B,WACvBtE,GAAiB,EACnB,EAsSgFvF,SAAC,eAVrEtB,EAAAA,EAAAA,KAACyF,EAAM,CAACwF,QAAQ,WAAWiD,KAAK,QAAQqB,WAAWvP,EAAAA,EAAAA,KAACyD,EAAQ,CAACK,SAAS,UAAYqH,QAxTvE,WACrBlE,GAAcT,GACdK,GAAiB,EACnB,OAqUSD,GACC5G,EAAAA,EAAAA,KAAC0F,EAAS,CACRmJ,WAAS,EACTK,WAAS,EACTU,QAAS,EACTC,QAAS,GACTjP,MAAOoG,GACP0E,SAjTa,SAACS,GACxBlF,GAAckF,EAAEL,OAAOlL,MACzB,EAgTYqK,QAAQ,WACRP,GAAI,CACFoF,WAAY,YACZhM,SAAU,UACV,uBAAwB,CACtB2F,EAAG,EACHsG,QAAS,wBAKf/P,EAAAA,EAAAA,KAACwF,EAAG,CACF0F,UAAU,MACVR,GAAI,CACFjB,EAAG,EACHsG,QAAS,mBACTjC,aAAc,EACdd,UAAW,QACXgD,SAAU,OACVF,WAAY,YACZG,WAAY,WACZnM,SAAU,UACVoM,WAAY,KACZ5O,SAEDkF,SAOf,C,uDCzdO,IAAMJ,EAAe,SAACH,GAAU,MAAW,CAChD0E,WAAY,CACVC,QAAS,OACTkE,cAAe,SACfhE,IAAK,MACLqF,QAAS,OACTC,gBAAiBnK,EAAMoK,QAAQC,WAAWC,MAC1CzC,aAAc,MACd0C,UAAWvK,EAAMwK,QAAQ,IAE3BC,WAAY,CACVhP,MAAO,OACPiM,OAAQ,OACRC,UAAW,WAEd,C","sources":["webpack://geoview-core/../geoview-custom-legend/src/index.tsx","webpack://geoview-core/./src/api/plugin/appbar-plugin.ts","webpack://geoview-core/../geoview-custom-legend/src/custom-legend.tsx","webpack://geoview-core/../geoview-custom-legend/src/custom-legend-style.ts"],"sourcesContent":["import React from 'react'; // GV This import is to validate that we're on the right React at the end of the file\nimport { AppBarPlugin } from 'geoview-core/api/plugin/appbar-plugin';\nimport { LegendIcon } from 'geoview-core/ui/icons';\nimport type { IconButtonPropsExtend } from 'geoview-core/ui/icon-button/icon-button';\nimport type { TypePanelProps } from 'geoview-core/ui/panel/panel-types';\nimport type { TypeLegendProps } from './custom-legend';\nimport { CustomLegendPanel } from './custom-legend';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-custom-legend.json';\n\n/**\n * Create a class for the plugin instance\n */\nclass CustomLegendPanelPlugin extends AppBarPlugin {\n  /**\n   * Return the package schema\n   *\n   * @returns {unknown} the package schema\n   */\n  override schema(): unknown {\n    return schema;\n  }\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {unknown} the default config\n   */\n  override defaultConfig(): unknown {\n    return defaultConfig;\n  }\n\n  /**\n   * Overrides the default translations for the Plugin.\n   * @returns {Record<string, unknown>} - The translations object for the particular Plugin.\n   */\n  override defaultTranslations(): Record<string, unknown> {\n    return {\n      en: {\n        CustomLegend: {\n          title: 'Custom Legend',\n        },\n      },\n      fr: {\n        CustomLegend: {\n          title: 'Légende personnalisée',\n        },\n      },\n    };\n  }\n\n  /**\n   * Overrides the getConfig in order to return the right type.\n   * @returns {TypeLegendProps} The Geochart config\n   */\n  override getConfig(): TypeLegendProps {\n    // Redirect\n    return super.getConfig() as TypeLegendProps;\n  }\n\n  override onCreateButtonProps(): IconButtonPropsExtend {\n    // Button props\n    return {\n      id: `custom-legend`,\n      tooltip: 'CustomLegend.title',\n      tooltipPlacement: 'right',\n      children: <LegendIcon />,\n      visible: true,\n    };\n  }\n\n  override onCreateContentProps(): TypePanelProps {\n    // Panel props\n    return {\n      title: 'CustomLegend.title',\n      icon: <LegendIcon />,\n      width: 350,\n      status: this.getConfig().isOpen,\n    };\n  }\n\n  override onCreateContent = (): JSX.Element => {\n    return (\n      <CustomLegendPanel\n        config={this.getConfig()}\n        onUpdateLegend={(legendList) => {\n          const currentConfig = this.getConfig();\n          this.setConfig({\n            ...currentConfig,\n            legendList,\n          });\n        }}\n      />\n    );\n  };\n\n  /**\n   * Function called when the plugin is removed, used for clean up\n   */\n  override onRemoved(): void {}\n}\n\nexport default CustomLegendPanelPlugin;\n\n// GV This if condition took over 3 days to investigate. It was giving errors on the app.geo.ca website with\n// GV some conflicting reacts being loaded on the page for some obscure reason.\n// Check if we're on the right react\nif (React === window.cgpv.reactUtilities.react) {\n  // Keep a reference to the Custom Legend Panel Plugin as part of the geoviewPlugins property stored in the window object\n  window.geoviewPlugins = window.geoviewPlugins || {};\n  window.geoviewPlugins['custom-legend'] = CustomLegendPanelPlugin;\n} // Else ignore, don't keep it on the window, wait for the right react load\n","import type { TypeWindow } from '@/core/types/global-types';\nimport type { TypeButtonPanel, TypePanelProps } from '@/ui/panel/panel-types';\nimport type { IconButtonPropsExtend } from '@/ui/icon-button/icon-button';\nimport { AbstractPlugin } from './abstract-plugin';\n\n/**\n * AppBar Plugin abstract class.\n */\nexport abstract class AppBarPlugin extends AbstractPlugin {\n  // Store the created button panel object\n  buttonPanel?: TypeButtonPanel;\n\n  // Store the button props\n  buttonProps?: IconButtonPropsExtend;\n\n  // Store the panel props\n  panelProps?: TypePanelProps;\n\n  /**\n   * Overrides the get config\n   * @override\n   * @returns {AppBarPluginConfig} The config\n   */\n  override getConfig(): AppBarPluginConfig {\n    return super.getConfig() as AppBarPluginConfig;\n  }\n\n  /**\n   * Overridable function to create app bar button props content\n   * @returns IconButtonPropsExtend The app bar button props content\n   */\n  protected onCreateButtonProps(): IconButtonPropsExtend {\n    // Override this to create the button props..\n\n    // Get cgpv\n    const { cgpv } = window as TypeWindow;\n    const { MapIcon } = cgpv.ui.elements;\n\n    // Return dummy plugin button\n    return {\n      id: 'somePluginButton',\n      tooltip: 'Some tooltip',\n      tooltipPlacement: 'right',\n      children: this.react.createElement(MapIcon),\n      visible: true,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar props content\n   * @returns TypePanelProps The app bar props content\n   */\n  protected onCreateContentProps(): TypePanelProps {\n    // Override this to create the panel props..\n\n    // Panel props\n    return {\n      title: 'Some title',\n      icon: '<i class=\"material-icons\">map</i>',\n      width: '80vw',\n      status: this.getConfig().isOpen,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar actual content\n   * @returns JSX.Element The app bar actual content\n   */\n  protected onCreateContent(): JSX.Element {\n    // Override this to create panel..\n\n    // Return dummy content\n    return this.react.createElement('div', undefined, `Content for AppBar Plugin on map id ${this.mapViewer.mapId} goes here...`);\n  }\n\n  /**\n   * Called when an app bar plugin is being added\n   */\n  protected onAdd(): void {\n    // Create button props\n    this.buttonProps = this.onCreateButtonProps();\n\n    // Create panel props\n    this.panelProps = this.onCreateContentProps();\n\n    // Create content\n    this.panelProps.content = this.onCreateContent();\n\n    // Create a new button panel on the app-bar\n    this.buttonPanel = this.mapViewer.appBarApi.createAppbarPanel(this.buttonProps, this.panelProps) || undefined;\n  }\n\n  /**\n   * Called when an app bar plugin is being removed\n   */\n  protected onRemove(): void {\n    // If cgpv exists\n    if (this.buttonPanel) {\n      // Remove the app bar panel\n      this.mapViewer.appBarApi.removeAppbarPanel(this.buttonPanel.buttonPanelId);\n    }\n  }\n}\n\nexport type AppBarPluginConfig = {\n  isOpen: boolean;\n};\n","import React from 'react';\nimport type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport { logger } from 'geoview-core/core/utils/logger';\nimport { getSxClasses } from './custom-legend-style';\n\ninterface CustomLegendPanelProps {\n  config: TypeLegendProps;\n  onUpdateLegend?: (legendList: LegendListItems) => void;\n}\n\ninterface LegendItem {\n  legendTitle: string;\n  symbolUrl: string;\n  description?: string;\n}\n\ntype LegendListItems = LegendItem[];\n\nexport type TypeLegendProps = {\n  isOpen: boolean;\n  legendList: LegendListItems;\n  version: string;\n};\n\n// Icon components\ntype IconProps = {\n  className?: string;\n  fontSize?: 'inherit' | 'small' | 'medium' | 'large';\n};\n\nconst EditIcon = ({ className = '', fontSize = 'medium' }: IconProps): JSX.Element => (\n  <i className={`material-icons ${className}`} style={{ fontSize }}>\n    Edit\n  </i>\n);\n\nconst DeleteIcon = ({ className = '', fontSize = 'medium' }: IconProps): JSX.Element => (\n  <i className={`material-icons ${className}`} style={{ fontSize }}>\n    delete\n  </i>\n);\n\nconst SaveIcon = ({ className = '', fontSize = 'medium' }: IconProps): JSX.Element => (\n  <i className={`material-icons ${className}`} style={{ fontSize }}>\n    save\n  </i>\n);\n\nexport function CustomLegendPanel(props: CustomLegendPanelProps): JSX.Element {\n  const { config, onUpdateLegend } = props;\n  const { legendList } = config;\n  const [editingIndex, setEditingIndex] = React.useState<number | null>(null);\n  const [editedItem, setEditedItem] = React.useState<LegendItem | null>(null);\n  const [hasLoadedData, setHasLoadedData] = React.useState(false);\n\n  const { cgpv } = window as TypeWindow;\n  const { ui } = cgpv;\n  const { Card, Box, Button, TextField, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, Typography } = ui.elements;\n\n  const theme = ui.useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  const [jsonContent, setJsonContent] = React.useState<string>('');\n  const [isEditingJson, setIsEditingJson] = React.useState<boolean>(false);\n  const [editedJson, setEditedJson] = React.useState<string>('');\n  const [loadedFileName, setLoadedFileName] = React.useState<string>('');\n\n  const normalizeToItems = (data: unknown): LegendItem[] | null => {\n    let validItems: LegendItem[] | null = null;\n\n    if (Array.isArray(data)) {\n      const isArrayValid = data.every(\n        (item) =>\n          typeof item === 'object' &&\n          item !== null &&\n          'legendTitle' in item &&\n          (('symbolUrl' in (item as Record<string, unknown>) && typeof (item as Record<string, unknown>).symbolUrl === 'string') ||\n            ('iconUrl' in (item as Record<string, unknown>) && typeof (item as Record<string, unknown>).iconUrl === 'string')) &&\n          typeof (item as Record<string, unknown>).legendTitle === 'string' &&\n          (!('description' in item) || typeof (item as Record<string, unknown>).description === 'string')\n      );\n      if (isArrayValid) {\n        validItems = (data as Array<Record<string, unknown>>).map((item) => ({\n          legendTitle: item.legendTitle as string,\n          symbolUrl: (item.symbolUrl as string) || (item.iconUrl as string),\n          description: (item.description as string) || '',\n        }));\n      }\n    }\n\n    if (!validItems && data && typeof data === 'object' && Array.isArray((data as Record<string, unknown>).symbologyStack)) {\n      const stack = (data as { symbologyStack: Array<Record<string, unknown>> }).symbologyStack;\n      const isStackValid = stack.every((s) => typeof s === 'object' && typeof s.image === 'string' && typeof s.text === 'string');\n      if (isStackValid) {\n        validItems = stack.map((s) => ({\n          legendTitle: s.text as string,\n          symbolUrl: s.image as string,\n          description: '',\n        }));\n      }\n    }\n\n    return validItems;\n  };\n\n  const handleEditJson = (): void => {\n    setEditedJson(jsonContent);\n    setIsEditingJson(true);\n  };\n\n  const handleSaveJson = (): void => {\n    try {\n      const parsedJson = JSON.parse(editedJson);\n      const validItems = normalizeToItems(parsedJson);\n\n      if (validItems) {\n        if (onUpdateLegend) {\n          onUpdateLegend(validItems);\n          setJsonContent(JSON.stringify(parsedJson, null, 2));\n          setIsEditingJson(false);\n        }\n      } else {\n        logger.logError(\n          'Invalid JSON structure. Provide an array of items with legendTitle and symbolUrl/iconUrl, or an object with symbologyStack.'\n        );\n      }\n    } catch (error) {\n      logger.logError(error instanceof Error ? error.message : error);\n    }\n  };\n\n  const handleCancelEdit = (): void => {\n    setIsEditingJson(false);\n  };\n\n  const handleJsonChange = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\n    setEditedJson(e.target.value);\n  };\n\n  // File upload handler\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e): void => {\n      try {\n        const fileContent = e.target?.result as string;\n        const jsonData = JSON.parse(fileContent);\n\n        // Store the formatted JSON content\n        setJsonContent(JSON.stringify(jsonData, null, 2));\n        const validItems = normalizeToItems(jsonData);\n\n        if (validItems) {\n          if (onUpdateLegend) {\n            onUpdateLegend(validItems);\n            setHasLoadedData(true);\n            setLoadedFileName(file.name);\n            // Clear the file input to allow re-uploading the same file\n            if (fileInputRef.current) {\n              fileInputRef.current.value = '';\n            }\n          }\n        } else {\n          logger.logError('Invalid legend data format');\n        }\n      } catch (error) {\n        logger.logError('Error parsing legend file:', error);\n        // Optionally show an error message to the user\n      }\n    };\n    reader.onerror = (): void => {\n      logger.logError('Error reading file');\n    };\n    reader.readAsText(file);\n  };\n\n  React.useEffect(() => {\n    let cancelled = false;\n    const tryFetch = async (paths: string[]): Promise<void> => {\n      const settled = await Promise.allSettled(\n        paths.map((p) =>\n          fetch(p).then((res) => {\n            if (!res.ok) return Promise.reject();\n            return res.json().then((data) => ({ path: p, data }));\n          })\n        )\n      );\n\n      for (let i = 0; i < settled.length; i++) {\n        const result = settled[i];\n        if (result.status === 'fulfilled') {\n          const { path, data } = result.value as { path: string; data: unknown };\n          const items = normalizeToItems(data);\n          if (items && !cancelled) {\n            if (onUpdateLegend) onUpdateLegend(items);\n            setJsonContent(JSON.stringify(data, null, 2));\n            setHasLoadedData(true);\n            setLoadedFileName(path);\n            return;\n          }\n        }\n      }\n    };\n    if (!hasLoadedData && legendList.length === 0) {\n      void tryFetch(['customlegend.json', '/customlegend.json', './customlegend.json']);\n    }\n    return () => {\n      cancelled = true;\n    };\n  }, [hasLoadedData, legendList.length, onUpdateLegend]);\n\n  const handleEditClick = (index: number): void => {\n    setEditingIndex(index);\n    setEditedItem({ ...legendList[index] });\n  };\n\n  const handleDeleteClick = (index: number): void => {\n    const newList = legendList.filter((_, i) => i !== index);\n    if (onUpdateLegend) {\n      onUpdateLegend(newList);\n    }\n  };\n\n  const handleInputChange = (field: keyof LegendItem, value: string): void => {\n    if (editedItem) {\n      setEditedItem({\n        ...editedItem,\n        [field]: value,\n      });\n    }\n  };\n\n  const handleSaveEdit = (): void => {\n    if (editingIndex !== null && editedItem) {\n      const newList = [...legendList];\n      if (editingIndex >= 0 && editingIndex < newList.length) {\n        newList[editingIndex] = editedItem;\n      } else {\n        newList.push(editedItem);\n      }\n      if (onUpdateLegend) {\n        onUpdateLegend(newList);\n      }\n      setEditingIndex(null);\n      setEditedItem(null);\n    }\n  };\n\n  return (\n    <Box sx={sxClasses.legendCard}>\n      <Box sx={{ p: 2, display: 'flex', justifyContent: 'space-between', gap: 1, flexWrap: 'wrap' }}>\n        <Box sx={{ display: 'flex', gap: 1, mb: 1 }}>\n          <Button variant=\"contained\" component=\"label\" onClick={() => fileInputRef.current?.click()}>\n            Load Legend\n            <input type=\"file\" ref={fileInputRef} accept=\".json\" style={{ display: 'none' }} onChange={handleFileUpload} />\n          </Button>\n        </Box>\n        {hasLoadedData && legendList.length > 0 && (\n          <Box sx={{ alignSelf: 'center', color: 'text.secondary' }}>\n            {legendList.length} item{legendList.length !== 1 ? 's' : ''} loaded\n          </Box>\n        )}\n      </Box>\n\n      {legendList.length > 0 ? (\n        <Box sx={{ maxHeight: '400px', overflowY: 'auto', pr: 1 }}>\n          {legendList.map((legendItem: LegendItem, index: number) => (\n            <Card\n              key={`legend-item-${legendItem.legendTitle}-${legendItem.symbolUrl}`}\n              sx={{\n                mb: 2,\n                position: 'relative',\n                '&:hover .legend-actions': {\n                  opacity: 1,\n                  visibility: 'visible',\n                },\n              }}\n            >\n              <Box className=\"legend-item-container\" sx={{ p: 2 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                  {legendItem.symbolUrl && (\n                    <Box\n                      component=\"img\"\n                      src={legendItem.symbolUrl}\n                      alt=\"\"\n                      sx={{\n                        width: 40,\n                        height: 40,\n                        objectFit: 'contain',\n                        border: '1px solid #ddd',\n                        borderRadius: 1,\n                      }}\n                    />\n                  )}\n                  <Box sx={{ flex: 1 }}>\n                    <Box sx={{ fontWeight: 'bold', mb: 0.5 }}>{legendItem.legendTitle}</Box>\n                    {legendItem.description && <Box sx={{ fontSize: '0.875rem', color: 'text.secondary' }}>{legendItem.description}</Box>}\n                  </Box>\n                  <Box\n                    className=\"legend-actions\"\n                    sx={{\n                      display: 'flex',\n                      gap: 1,\n                      opacity: 0,\n                      visibility: 'hidden',\n                      transition: 'opacity 0.2s, visibility 0.2s',\n                    }}\n                  >\n                    <IconButton\n                      size=\"small\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEditClick(index);\n                      }}\n                      title=\"Edit\"\n                    >\n                      <EditIcon fontSize=\"small\" />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteClick(index);\n                      }}\n                      color=\"error\"\n                      title=\"Delete\"\n                    >\n                      <DeleteIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Box>\n                </Box>\n              </Box>\n            </Card>\n          ))}\n        </Box>\n      ) : (\n        <Box sx={{ p: 3, textAlign: 'center', color: 'text.secondary' }}>\n          {loadedFileName ? `Loaded: ${loadedFileName}` : 'No legend items. Load a legend file or add a new item.'}\n        </Box>\n      )}\n\n      {/* Edit Dialog */}\n      <Dialog\n        open={editingIndex !== null && editedItem !== null}\n        onClose={() => {\n          setEditingIndex(null);\n          setEditedItem(null);\n        }}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>{editingIndex !== null && editingIndex >= 0 ? 'Edit Legend Item' : 'Add New Legend Item'}</DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, pt: 2 }}>\n            <TextField\n              label=\"Legend Title\"\n              value={editedItem?.legendTitle || ''}\n              onChange={(e) => handleInputChange('legendTitle', e.target.value)}\n              fullWidth\n              margin=\"dense\"\n            />\n            <TextField\n              label=\"Symbol URL\"\n              value={editedItem?.symbolUrl || ''}\n              onChange={(e) => handleInputChange('symbolUrl', e.target.value)}\n              fullWidth\n              margin=\"dense\"\n            />\n            <TextField\n              label=\"Description\"\n              value={editedItem?.description || ''}\n              onChange={(e) => handleInputChange('description', e.target.value)}\n              fullWidth\n              multiline\n              rows={2}\n              margin=\"dense\"\n            />\n            {editedItem?.symbolUrl && (\n              <Box sx={{ mt: 1, textAlign: 'center' }}>\n                <Box sx={{ fontWeight: 'medium', mb: 1 }}>Preview:</Box>\n                <Box\n                  component=\"img\"\n                  src={editedItem.symbolUrl}\n                  alt=\"Symbol Preview\"\n                  sx={{\n                    maxWidth: '100%',\n                    maxHeight: 100,\n                    border: '1px solid #ddd',\n                    p: 1,\n                    borderRadius: 1,\n                  }}\n                />\n              </Box>\n            )}\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => {\n              setEditingIndex(null);\n              setEditedItem(null);\n            }}\n          >\n            Cancel\n          </Button>\n          <Button onClick={handleSaveEdit} variant=\"contained\" color=\"primary\" startIcon={<SaveIcon />}>\n            Save\n          </Button>\n        </DialogActions>\n      </Dialog>\n      {jsonContent && (\n        <Box sx={{ mt: 3, p: 2, borderTop: '1px solid #eee' }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n            <Typography variant=\"h6\">JSON Content</Typography>\n            {!isEditingJson ? (\n              <Button variant=\"outlined\" size=\"small\" startIcon={<EditIcon fontSize=\"small\" />} onClick={handleEditJson}></Button>\n            ) : (\n              <Box sx={{ display: 'flex', gap: 1 }}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"small\"\n                  startIcon={<SaveIcon fontSize=\"small\" />}\n                  onClick={handleSaveJson}\n                ></Button>\n                <Button variant=\"outlined\" size=\"small\" onClick={handleCancelEdit}>\n                  Cancel\n                </Button>\n              </Box>\n            )}\n          </Box>\n          {isEditingJson ? (\n            <TextField\n              fullWidth\n              multiline\n              minRows={8}\n              maxRows={12}\n              value={editedJson}\n              onChange={handleJsonChange}\n              variant=\"outlined\"\n              sx={{\n                fontFamily: 'monospace',\n                fontSize: '0.75rem',\n                '& .MuiInputBase-root': {\n                  p: 1,\n                  bgcolor: 'background.paper',\n                },\n              }}\n            />\n          ) : (\n            <Box\n              component=\"pre\"\n              sx={{\n                p: 2,\n                bgcolor: 'background.paper',\n                borderRadius: 1,\n                maxHeight: '200px',\n                overflow: 'auto',\n                fontFamily: 'monospace',\n                whiteSpace: 'pre-wrap',\n                fontSize: '0.75rem',\n                lineHeight: 1.5,\n              }}\n            >\n              {jsonContent}\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n","// ? I doubt we want to define an explicit type for style properties?\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const getSxClasses = (theme: any): any => ({\n  legendCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '8px',\n    padding: '16px',\n    backgroundColor: theme.palette.background.paper,\n    borderRadius: '4px',\n    boxShadow: theme.shadows[1],\n  },\n  legendIcon: {\n    width: '24px',\n    height: '24px',\n    objectFit: 'contain',\n  },\n});\n"],"names":["CustomLegendPanelPlugin","_AppBarPlugin","_this","_classCallCheck","_len","arguments","length","args","Array","_key","concat","_defineProperty","_jsx","CustomLegendPanel","config","getConfig","onUpdateLegend","legendList","currentConfig","setConfig","_objectSpread","_inherits","_createClass","key","value","schema","defaultConfig","en","CustomLegend","title","fr","id","tooltip","tooltipPlacement","children","LegendIcon","visible","icon","width","status","this","isOpen","AppBarPlugin","React","window","cgpv","reactUtilities","react","geoviewPlugins","_AbstractPlugin","MapIcon","ui","elements","createElement","undefined","mapViewer","mapId","buttonProps","onCreateButtonProps","panelProps","onCreateContentProps","content","onCreateContent","buttonPanel","appBarApi","createAppbarPanel","removeAppbarPanel","buttonPanelId","AbstractPlugin","EditIcon","_ref","_ref$className","className","_ref$fontSize","fontSize","style","DeleteIcon","_ref2","_ref2$className","_ref2$fontSize","SaveIcon","_ref3","_ref3$className","_ref3$fontSize","props","_React$useState","_React$useState2","_slicedToArray","editingIndex","setEditingIndex","_React$useState3","_React$useState4","editedItem","setEditedItem","_React$useState5","_React$useState6","hasLoadedData","setHasLoadedData","_ui$elements","Card","Box","Button","TextField","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","Typography","theme","useTheme","sxClasses","getSxClasses","fileInputRef","_React$useState7","_React$useState8","jsonContent","setJsonContent","_React$useState9","_React$useState0","isEditingJson","setIsEditingJson","_React$useState1","_React$useState10","editedJson","setEditedJson","_React$useState11","_React$useState12","loadedFileName","setLoadedFileName","normalizeToItems","data","validItems","isArray","every","item","_typeof","symbolUrl","iconUrl","legendTitle","description","map","symbologyStack","stack","s","image","text","cancelled","tryFetch","_ref5","_asyncToGenerator","_regeneratorRuntime","_callee","paths","settled","i","result","_ref6","path","items","_context","prev","next","Promise","allSettled","p","fetch","then","res","ok","json","reject","sent","JSON","stringify","abrupt","stop","_x","apply","handleInputChange","field","_jsxs","sx","legendCard","display","justifyContent","gap","flexWrap","mb","variant","component","onClick","_fileInputRef$current","current","click","type","ref","accept","onChange","event","_event$target$files","file","target","files","reader","FileReader","onload","e","_e$target","fileContent","jsonData","parse","name","logger","logError","error","onerror","readAsText","alignSelf","color","maxHeight","overflowY","pr","legendItem","index","position","opacity","visibility","alignItems","src","alt","height","objectFit","border","borderRadius","flex","fontWeight","transition","size","stopPropagation","handleEditClick","newList","filter","_","handleDeleteClick","textAlign","open","onClose","maxWidth","fullWidth","flexDirection","pt","label","margin","multiline","rows","mt","_toConsumableArray","push","startIcon","borderTop","parsedJson","Error","message","minRows","maxRows","fontFamily","bgcolor","overflow","whiteSpace","lineHeight","padding","backgroundColor","palette","background","paper","boxShadow","shadows","legendIcon"],"sourceRoot":""}