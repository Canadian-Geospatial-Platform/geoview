{"version":3,"file":"corePackages/geoview-aoi-panel.js","mappings":"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","sources":["webpack://geoview-core/./src/api/plugin/appbar-plugin.ts","webpack://geoview-core/../geoview-aoi-panel/src/area-of-interest-style.ts","webpack://geoview-core/../geoview-aoi-panel/src/index.tsx","webpack://geoview-core/../geoview-aoi-panel/src/aoi-panel.tsx"],"sourcesContent":["import type { TypeWindow } from '@/core/types/global-types';\nimport type { TypeButtonPanel, TypePanelProps } from '@/ui/panel/panel-types';\nimport type { IconButtonPropsExtend } from '@/ui/icon-button/icon-button';\nimport { AbstractPlugin } from './abstract-plugin';\n\n/**\n * AppBar Plugin abstract class.\n */\nexport abstract class AppBarPlugin extends AbstractPlugin {\n  // Store the created button panel object\n  buttonPanel?: TypeButtonPanel;\n\n  // Store the button props\n  buttonProps?: IconButtonPropsExtend;\n\n  // Store the panel props\n  panelProps?: TypePanelProps;\n\n  /**\n   * Overrides the get config\n   * @override\n   * @returns {AppBarPluginConfig} The config\n   */\n  override getConfig(): AppBarPluginConfig {\n    return super.getConfig() as AppBarPluginConfig;\n  }\n\n  /**\n   * Overridable function to create app bar button props content\n   * @returns IconButtonPropsExtend The app bar button props content\n   */\n  protected onCreateButtonProps(): IconButtonPropsExtend {\n    // Override this to create the button props..\n\n    // Get cgpv\n    const { cgpv } = window as TypeWindow;\n    const { MapIcon } = cgpv.ui.elements;\n\n    // Return dummy plugin button\n    return {\n      id: 'somePluginButton',\n      'aria-label': 'Some aria label',\n      tooltip: 'Some tooltip',\n      tooltipPlacement: 'right',\n      children: this.react.createElement(MapIcon),\n      visible: true,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar props content\n   * @returns TypePanelProps The app bar props content\n   */\n  protected onCreateContentProps(): TypePanelProps {\n    // Override this to create the panel props..\n\n    // Panel props\n    return {\n      title: 'Some title',\n      icon: '<i class=\"material-icons\">map</i>',\n      width: 100,\n      status: this.getConfig().isOpen,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar actual content\n   * @returns JSX.Element The app bar actual content\n   */\n  protected onCreateContent(): JSX.Element {\n    // Override this to create panel..\n\n    // Return dummy content\n    return this.react.createElement('div', undefined, `Content for AppBar Plugin on map id ${this.mapViewer.mapId} goes here...`);\n  }\n\n  /**\n   * Called when an app bar plugin is being added\n   */\n  protected onAdd(): void {\n    // Create button props\n    this.buttonProps = this.onCreateButtonProps();\n\n    // Create panel props\n    this.panelProps = this.onCreateContentProps();\n\n    // Create content\n    this.panelProps.content = this.onCreateContent();\n\n    // Create a new button panel on the app-bar\n    this.buttonPanel = this.mapViewer.appBarApi.createAppbarPanel(this.buttonProps, this.panelProps) || undefined;\n  }\n\n  /**\n   * Called when an app bar plugin is being removed\n   */\n  protected onRemove(): void {\n    // If cgpv exists\n    if (this.buttonPanel) {\n      // Remove the app bar panel\n      this.mapViewer.appBarApi.removeAppbarPanel(this.buttonPanel.buttonPanelId);\n    }\n  }\n}\n\nexport type AppBarPluginConfig = {\n  isOpen: boolean;\n};\n","// ? I doubt we want to define an explicit type for style properties?\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const getSxClasses = (theme: any): any => ({\n  aoiCard: {\n    height: '100%',\n    overflowY: 'auto',\n    '& .MuiCard-root': {\n      backgroundColor: theme.palette.grey.A700,\n      color: theme.palette.primary.light,\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundClip: 'padding-box',\n      border: '2px solid rgba(255,255,255,0.25)',\n      borderRadius: '6px',\n      boxShadow: 'none',\n      marginBottom: '16px',\n      width: '300px',\n      transition: 'all 0.3s ease-in-out',\n      '&:last-child': {\n        marginBottom: '0px',\n      },\n      '&:hover': {\n        border: `2px solid #FFFF00`,\n      },\n      '&.active': {\n        border: `2px solid #FFFFFF`,\n      },\n    },\n    '& .MuiCardHeader-root': {\n      backgroundColor: `${theme.palette.geoViewColor.grey.dark[900]} !important`,\n      color: theme.palette.geoViewColor.grey.light[900],\n      fontSize: 14,\n      fontWeight: 400,\n      margin: 0,\n      padding: '0 12px',\n      height: 60,\n      width: '100%',\n      order: 2,\n    },\n    '& .MuiCardContent-root': {\n      order: 1,\n      height: 190,\n      position: 'relative',\n      padding: 0,\n      '&:last-child': {\n        padding: 0,\n      },\n      '& .aoiCardThumbnail': {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        border: '1px solid theme.palette.geoViewColor.ccc',\n        display: 'flex',\n        align: 'center',\n        objectFit: 'cover',\n        top: 0,\n        left: 0,\n      },\n      '& .aoiCardThumbnailOverlay': {\n        display: 'block',\n        height: '100%',\n        width: '100%',\n        position: 'absolute',\n        backgroundColor: theme.palette.geoViewColor.grey.lighten(0.5, 0.85),\n        transition: 'all 0.3s ease-in-out',\n      },\n    },\n    '&:hover': {\n      cursor: 'pointer',\n      borderColor: theme.palette.geoViewColor.primary.main,\n      '& .MuiCardContent-root': {\n        '& .aoiCardThumbnailOverlay': {\n          backgroundColor: theme.palette.geoViewColor.grey.lighten(0.5, 0.55),\n        },\n      },\n    },\n    '&.active': {\n      borderColor: theme.palette.geoViewColor.primary.light[200],\n      '& .MuiCardContent-root': {\n        '& .aoiCardThumbnailOverlay': {\n          backgroundColor: 'transparent',\n        },\n      },\n      '&:hover': {\n        borderColor: 'rgba(255,255,255,0.75)',\n        '& .MuiCardContent-root': {\n          '& .aoiCardThumbnailOverlay': {\n            backgroundColor: 'rgba(0,0,0,0)',\n          },\n        },\n      },\n    },\n  },\n});\n","import React from 'react'; // GV This import is to validate that we're on the right React at the end of the file\nimport { AppBarPlugin } from 'geoview-core/api/plugin/appbar-plugin';\nimport { AoiIcon } from 'geoview-core/ui/icons';\nimport type { IconButtonPropsExtend } from 'geoview-core/ui/icon-button/icon-button';\nimport type { TypePanelProps } from 'geoview-core/ui/panel/panel-types';\nimport type { TypeAoiProps } from './aoi-panel';\nimport { AoiPanel } from './aoi-panel';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-aoi-panel.json';\n\n/**\n * Create a class for the plugin instance\n */\nclass AoiPanelPlugin extends AppBarPlugin {\n  /**\n   * Return the package schema\n   *\n   * @returns {unknown} the package schema\n   */\n  override schema(): unknown {\n    return schema;\n  }\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {unknown} the default config\n   */\n  override defaultConfig(): unknown {\n    return defaultConfig;\n  }\n\n  /**\n   * Overrides the default translations for the Plugin.\n   * @returns {Record<string, unknown>} - The translations object for the particular Plugin.\n   */\n  override defaultTranslations(): Record<string, unknown> {\n    return {\n      en: {\n        AoiPanel: {\n          title: 'Area of Interest',\n        },\n      },\n      fr: {\n        AoiPanel: {\n          title: \"Région d'intérêt\",\n        },\n      },\n    };\n  }\n\n  /**\n   * Overrides the getConfig in order to return the right type.\n   * @returns {TypeAoiProps} The AOI Propos\n   */\n  override getConfig(): TypeAoiProps {\n    // Redirect\n    return super.getConfig() as TypeAoiProps;\n  }\n\n  override onCreateButtonProps(): IconButtonPropsExtend {\n    // Button props\n    return {\n      id: `aoi-panel`,\n      'aria-label': 'AoiPanel.title',\n      tooltipPlacement: 'right',\n      children: <AoiIcon />,\n      visible: true,\n    };\n  }\n\n  override onCreateContentProps(): TypePanelProps {\n    // Panel props\n    return {\n      title: 'AoiPanel.title',\n      icon: <AoiIcon />,\n      width: 350,\n      status: this.getConfig().isOpen,\n    };\n  }\n\n  override onCreateContent = (): JSX.Element => {\n    return <AoiPanel mapId={this.mapViewer.mapId} config={this.getConfig()} />;\n  };\n\n  /**\n   * Function called when the plugin is removed, used for clean up\n   */\n  override onRemoved(): void {}\n}\n\nexport default AoiPanelPlugin;\n\n// GV This if condition took over 3 days to investigate. It was giving errors on the app.geo.ca website with\n// GV some conflicting reacts being loaded on the page for some obscure reason.\n// Check if we're on the right react\nif (React === window.cgpv.reactUtilities.react) {\n  // Keep a reference to the AoiPanelPlugin Plugin as part of the geoviewPlugins property stored in the window object\n  window.geoviewPlugins = window.geoviewPlugins || {};\n  window.geoviewPlugins['aoi-panel'] = AoiPanelPlugin;\n} // Else ignore, don't keep it on the window, wait for the right react load\n","import type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport type { Extent } from 'geoview-core/api/types/map-schema-types';\nimport { logger } from 'geoview-core/core/utils/logger';\nimport { useMapStoreActions } from 'geoview-core/core/stores/store-interface-and-intial-values/map-state';\nimport { getSxClasses } from './area-of-interest-style';\n\ninterface AoiPanelProps {\n  mapId: string;\n  config: TypeAoiProps;\n}\n\ninterface AoiItem {\n  aoiTitle: string;\n  imageUrl: string;\n  extent: Extent;\n}\n\ntype AoiListItems = AoiItem[];\n\nexport type TypeAoiProps = {\n  isOpen: boolean;\n  aoiList: AoiListItems;\n  version: string;\n};\n\nexport function AoiPanel(props: AoiPanelProps): JSX.Element {\n  const { mapId, config } = props;\n  const { aoiList } = config;\n\n  const { cgpv } = window as TypeWindow;\n  const { api, ui } = cgpv;\n\n  const myMap = api.getMapViewer(mapId);\n  const { Card, Box } = ui.elements;\n\n  const theme = ui.useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  const { highlightBBox } = useMapStoreActions();\n\n  return (\n    <Box sx={sxClasses.aoiCard}>\n      {aoiList.map((aoiItem: AoiItem, index) => {\n        return (\n          <Card\n            tabIndex={0}\n            className=\"aoiCardThumbnail\"\n            onClick={() => {\n              myMap\n                .zoomToLonLatExtentOrCoordinate(aoiItem.extent, { maxZoom: 14 })\n                .then(() => {\n                  highlightBBox(myMap.convertExtentLonLatToMapProj(aoiItem.extent), false);\n                })\n                .catch((error: unknown) => {\n                  // Log\n                  logger.logPromiseFailed('in zoomToLonLatExtentOrCoordinate', error);\n                });\n            }}\n            // eslint-disable-next-line react/no-array-index-key\n            key={index}\n            title={aoiItem.aoiTitle}\n            contentCard={\n              // eslint-disable-next-line react/jsx-no-useless-fragment\n              <>\n                {typeof aoiItem.imageUrl === 'string' && (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <Box component=\"img\" key={index} src={aoiItem.imageUrl} alt=\"\" className=\"aoiCardThumbnail\" />\n                )}\n              </>\n            }\n          />\n        );\n      })}\n    </Box>\n  );\n}\n"],"names":["AppBarPlugin","_AbstractPlugin","_this","_classCallCheck","_len","arguments","length","args","Array","_key","concat","_defineProperty","_inherits","_createClass","key","value","MapIcon","window","cgpv","ui","elements","id","tooltip","tooltipPlacement","children","this","react","createElement","visible","title","icon","width","status","getConfig","isOpen","undefined","mapViewer","mapId","buttonProps","onCreateButtonProps","panelProps","onCreateContentProps","content","onCreateContent","buttonPanel","appBarApi","createAppbarPanel","removeAppbarPanel","buttonPanelId","AbstractPlugin","getSxClasses","theme","aoiCard","height","overflowY","backgroundColor","palette","grey","A700","color","primary","light","display","flexDirection","backgroundClip","border","borderRadius","boxShadow","marginBottom","transition","geoViewColor","dark","fontSize","fontWeight","margin","padding","order","position","overflow","align","objectFit","top","left","lighten","cursor","borderColor","main","AoiPanelPlugin","_AppBarPlugin","_jsx","AoiPanel","config","schema","defaultConfig","en","fr","AoiIcon","React","reactUtilities","geoviewPlugins","props","aoiList","api","myMap","getMapViewer","_ui$elements","Card","Box","useTheme","sxClasses","highlightBBox","useMapStoreActions","sx","map","aoiItem","index","tabIndex","className","onClick","zoomToLonLatExtentOrCoordinate","extent","maxZoom","then","convertExtentLonLatToMapProj","error","logger","logPromiseFailed","aoiTitle","contentCard","_Fragment","imageUrl","component","src","alt"],"ignoreList":[],"sourceRoot":""}