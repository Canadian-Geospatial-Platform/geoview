/*! Package:geoview-time-slider: 2.1.2 - "4ac3c18fbcb5235c2a510961cbe72ea7d4870345" - 2026-01-30T14:00:13.895Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[405],{25786:(e,t,i)=>{i.a(e,async(e,r)=>{try{i.d(t,{p:()=>P});var n=i(10379),a=i(6416),l=i(7291),o=i(47567),s=i(32427),c=i(75075),d=i(3691),u=i(53109),p=i(82438),m=i(6279),f=i(99618),h=i(79294),g=i(97282),y=e([l,o,s,c,d,u,p,h]);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach(function(t){(0,n.A)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function P(e){var t;p.vF.logTraceRender("geoview-time-slider/time-slider",e);var i=window.cgpv,r=e.layerPath,n=i.reactUtilities,y=i.ui,v=y.useTheme,P=n.react,L=P.useState,b=P.useRef,j=P.useEffect,w=P.useCallback,S=y.elements,k=S.Grid,T=S.Slider,I=S.Typography,M=S.Tooltip,A=S.IconButton,D=S.LockIcon,C=S.LockOpenIcon,z=S.ArrowLeftIcon,E=S.PlayArrowIcon,O=S.PauseIcon,F=S.ArrowRightIcon,R=S.SwitchRightIcon,V=S.SwitchLeftIcon,B=S.FormControl,N=S.InputLabel,U=S.NativeSelect,G=v(),H=(0,f.S)(G),Y=L(!1),W=(0,a.A)(Y,2),K=W[0],q=W[1],J=b(),_=b(),Z=b(),$=(0,o.Gg)(),Q=$.setValues,X=$.setLocked,ee=$.setReversed,te=$.setDelay,ie=$.setStep,re=$.setFiltering,ne=(0,u.t)(),ae=(0,o.ky)()[r],le=ae.title,oe=ae.additionalLayerpaths,se=ae.description,ce=ae.discreteValues,de=ae.step,ue=ae.range,pe=ae.minAndMax,me=ae.filtering,fe=ae.singleHandle,he=ae.values,ge=ae.delay,ye=ae.locked,ve=ae.reversed,xe=ae.displayPattern,Pe=(0,s.Yo)(),Le=null===(t=c.K.findLayerByPath(Pe,r))||void 0===t?void 0:t.layerName,be=null==oe?void 0:oe.map(function(e){var t;return null===(t=c.K.findLayerByPath(Pe,e))||void 0===t?void 0:t.layerName}),je=be?"".concat(Le,", ").concat(be.join(", ")):Le,we=le||je,Se=ue.map(function(e){return"number"!=typeof e?m.P.convertToMilliseconds(e):e}),ke=[];if(ue.length<4&&ce){var Te=(m.P.convertToMilliseconds(ue[ue.length-1])-m.P.convertToMilliseconds(ue[0]))/4;ke=[pe[0],pe[0]+Te,pe[0]+2*Te,pe[0]+3*Te,pe[1]]}else ke=ue.length<6||fe||!ce?Se:[pe[0],m.P.convertToMilliseconds(ue[Math.round(ue.length/4)]),m.P.convertToMilliseconds(ue[Math.round(ue.length/2)]),m.P.convertToMilliseconds(ue[Math.round(3*ue.length/4)]),pe[1]];for(var Ie=[],Me=0;Me<ke.length;Me++)Ie.push({value:ke[Me],label:void 0!==xe[1]&&null!==xe[1]?m.P.formatDatePattern(ke[Me],void 0,xe[1]):m.P.formatDatePattern(ke[Me],xe[0],xe[1])});var Ae=w(function(e){var t="forward"===e,i=t?1:-1;if(!fe||ce)if(fe){var n=de||(pe[1]-pe[0])/20,l=he[0]+n*i;Q(r,[l>pe[1]?pe[0]:l<pe[0]?pe[1]:l])}else{var o=(0,a.A)(he,2),s=o[0],c=o[1];if(c-s===pe[1]-pe[0])return Z.current=(pe[1]-pe[0])/10,void Q(r,t?[s,s+Z.current]:[c-Z.current,c]);Z.current||(Z.current=c-s);var d=Z.current*i;if(ye&&ve){if(s+=d,t&&s>=c||!t&&s<pe[0])s=(0,a.A)(pe,1)[0]}else if(ye){if(t&&c===pe[1]&&(c=s),(c+=d)>pe[1])c=(0,a.A)(pe,2)[1];else!t&&c<s&&(c=s);if(!t&&c===s)c=(0,a.A)(pe,2)[1]}else if(t){if(s<_.current&&c===_.current?s=_.current:s+=d,s>=pe[1])s=(0,a.A)(pe,1)[0];if((c=s+Z.current)>pe[1])c=(0,a.A)(pe,2)[1];c>_.current&&s<_.current&&(c=_.current)}else{if(c>_.current&&s===_.current?c=_.current:c+=d,c<=pe[0])c=(0,a.A)(pe,2)[1];if((s=c-Z.current)<pe[0])s=(0,a.A)(pe,1)[0];s<_.current&&c>_.current&&(s=_.current)}Q(r,[s,c])}else{var u=Se.indexOf(he[0]),p=u===(t?Se.length-1:0)?t?0:Se.length-1:u+i;Q(r,[Se[p]])}},[ce,r,ye,pe,ve,Q,fe,de,Se,he]),De=w(function(){Ae("back")},[Ae]),Ce=w(function(){Ae("forward")},[Ae]);j(function(){p.vF.logTraceUseEffect("TIME-SLIDER - values filtering",he,me),K&&(J.current=ve?window.setTimeout(De,ge):window.setTimeout(Ce,ge))},[he,me,ve,ye]),j(function(){p.vF.logTraceUseEffect("TIME-SLIDER - isPlaying",K),K&&(ve?De():Ce())},[K]);var ze=w(function(){_.current=ve?he[1]:he[0],De()},[De,ve,he]),Ee=w(function(){var e=(0,a.A)(he,1);_.current=e[0],Ce()},[Ce,he]),Oe=w(function(){clearTimeout(J.current),X(r,!ye)},[r,ye,X]),Fe=w(function(){clearTimeout(J.current),_.current=ve?he[1]:he[0],q(!K)},[K,ve,he]),Re=w(function(){clearTimeout(J.current),ee(r,!ve),K&&(ve?De():Ce())},[K,r,De,Ce,ve,ee]),Ve=w(function(e){te(r,Number(e.target.value))},[r,te]),Be=w(function(e){ie(r,Number(e.target.value))},[r,ie]),Ne=w(function(e,t){re(r,t),t||(clearInterval(J.current),q(!1))},[r,re]),Ue=w(function(e){p.vF.logTraceUseCallback("TIME-SLIDER - handleSliderChange",r),clearTimeout(J.current),q(!1),Z.current=void 0,Q(r,e)},[r,Q]),Ge=w(function(e){return p.vF.logTraceUseCallback("TIME-SLIDER - handleLabelFormat",xe),m.P.formatDatePattern(he[0],xe[0],xe[1]),m.P.formatDatePattern(e,xe[0],xe[1])},[xe,he]);function He(){return ve?ye?(0,d.getLocalizedMessage)(ne,"timeSlider.slider.unlockRight"):(0,d.getLocalizedMessage)(ne,"timeSlider.slider.lockRight"):ye?(0,d.getLocalizedMessage)(ne,"timeSlider.slider.unlockLeft"):(0,d.getLocalizedMessage)(ne,"timeSlider.slider.lockLeft")}return(0,g.jsx)(k,{children:(0,g.jsxs)(l.Box,{sx:{padding:"10px 10px"},children:[(0,g.jsxs)(k,{container:!0,sx:x(x({},H.rightPanelBtnHolder),{},{flexWrap:"nowrap",alignItems:"center"}),children:[(0,g.jsx)(k,{size:{xs:9},children:(0,g.jsxs)(I,{component:"div",sx:x(x({},H.panelHeaders),{},{paddingLeft:"20px"}),children:[we,void 0===xe[0]&&" (".concat(m.P.formatDate(m.P.formatDateToISO(he[0]),"YYYY-MM-DD"),")")]})}),(0,g.jsx)(k,{size:{xs:3},children:(0,g.jsx)(l.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"10px"},children:(0,g.jsx)(M,{title:me?(0,d.getLocalizedMessage)(ne,"timeSlider.slider.disableFilter"):(0,d.getLocalizedMessage)(ne,"timeSlider.slider.enableFilter"),children:(0,g.jsx)("span",{children:(0,g.jsx)(h.d,{size:"small",checked:me,onChange:Ne,label:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.filter")})})})})})]}),(0,g.jsx)(k,{size:{xs:12},children:(0,g.jsx)(l.Box,{sx:{textAlign:"center",paddingTop:"20px"},children:(0,g.jsx)(T,{style:{width:"80%",color:"primary"},min:pe[0],max:pe[1],value:he,marks:Ie,step:ce?de||.1:null,onChangeCommitted:Ue,onValueLabelFormat:Ge},he[1]?he[1]+he[0]:he[0])})}),(0,g.jsx)(k,{size:{xs:12},children:(0,g.jsxs)(l.Box,{sx:{textAlign:"center",paddingTop:"20px"},children:[!fe&&(0,g.jsx)(A,{className:"buttonOutline","aria-label":He(),tooltip:He(),tooltipPlacement:"top",onClick:Oe,children:ye?(0,g.jsx)(D,{}):(0,g.jsx)(C,{})}),(0,g.jsx)(A,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(ne,"timeSlider.slider.back"),tooltip:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.back"),tooltipPlacement:"top",disabled:K||!me,onClick:ze,children:(0,g.jsx)(z,{})}),(0,g.jsx)(A,{className:"buttonOutline","aria-label":K?(0,d.getLocalizedMessage)(ne,"timeSlider.slider.pauseAnimation"):(0,d.getLocalizedMessage)(ne,"timeSlider.slider.playAnimation"),tooltip:K?(0,d.getLocalizedMessage)(ne,"timeSlider.slider.pauseAnimation"):(0,d.getLocalizedMessage)(ne,"timeSlider.slider.playAnimation"),tooltipPlacement:"top",disabled:!me,onClick:Fe,children:K?(0,g.jsx)(O,{}):(0,g.jsx)(E,{})}),(0,g.jsx)(A,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(ne,"timeSlider.slider.forward"),tooltip:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.forward"),tooltipPlacement:"top",disabled:K||!me,onClick:Ee,children:(0,g.jsx)(F,{})}),(0,g.jsx)(A,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(ne,"timeSlider.slider.changeDirection"),tooltip:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.changeDirection"),tooltipPlacement:"top",onClick:Re,children:ve?(0,g.jsx)(R,{}):(0,g.jsx)(V,{})}),(0,g.jsx)(l.Box,{component:"span",sx:{paddingLeft:"10px"},children:(0,g.jsxs)(B,{sx:{width:"100px"},children:[(0,g.jsx)(N,{variant:"standard",children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.timeDelay")}),(0,g.jsxs)(U,{defaultValue:ge,inputProps:{name:"timeDelay",onChange:Ve},children:[(0,g.jsx)("option",{value:500,children:"0.5s"}),(0,g.jsx)("option",{value:750,children:"0.75s"}),(0,g.jsx)("option",{value:1e3,children:"1.0s"}),(0,g.jsx)("option",{value:1500,children:"1.5s"}),(0,g.jsx)("option",{value:2e3,children:"2.0s"}),(0,g.jsx)("option",{value:3e3,children:"3.0s"}),(0,g.jsx)("option",{value:5e3,children:"5.0s"})]},ge)]})}),fe&&ce&&(0,g.jsx)(l.Box,{component:"span",sx:{paddingLeft:"10px"},children:(0,g.jsxs)(B,{sx:{width:"100px"},children:[(0,g.jsx)(N,{variant:"standard",children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.stepValue")}),(0,g.jsxs)(U,{defaultValue:de,inputProps:{name:"timeStep",onChange:Be},children:[(0,g.jsx)("option",{value:36e5,children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.hour")}),(0,g.jsx)("option",{value:864e5,children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.day")}),(0,g.jsx)("option",{value:6048e5,children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.week")}),(0,g.jsx)("option",{value:2592e6,children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.month")}),(0,g.jsx)("option",{value:31536e6,children:(0,d.getLocalizedMessage)(ne,"timeSlider.slider.year")})]})]})})]})}),(se||(null==be?void 0:be.length))&&(0,g.jsx)(k,{size:{xs:12},children:(0,g.jsx)(I,{component:"div",sx:{px:"20px",py:"5px",paddingTop:"15px",fontSize:"0.875rem"},children:se||je})})]})})}[l,o,s,c,d,u,p,h]=y.then?(await y)():y,r()}catch(L){r(L)}})},53959:(e,t,i)=>{i.a(e,async(e,r)=>{try{i.d(t,{b:()=>y});var n=i(6416),a=i(9253),l=i(47567),o=i(2608),s=i(32427),c=i(75075),d=i(7291),u=i(82438),p=i(91954),m=i(6279),f=i(25786),h=i(97282),g=e([a,l,o,s,c,d,u,f]);function y(e){var t=e.mapId,i=window.cgpv.reactUtilities.react,r=i.useCallback,g=i.useMemo,y=(0,o.eI)(),v=(0,l.ky)(),x=(0,l.h4)(),P=(0,l.Gg)().setSelectedLayerPath,L=(0,o.U6)().isLayerHiddenOnMap,b=(0,s.Yo)(),j=r(function(e){u.vF.logTraceUseCallback("TIME-SLIDER-PANEL - handleLayerList"),null==P||P(e.layerPath)},[P]),w=function(e){if(e.filtering){var t=e.values,i=(0,n.A)(e.displayPattern,2),r=i[0],a=i[1];return 1===e.values.length?m.P.formatDatePattern(t[0],"day",a):"".concat(m.P.formatDatePattern(t[0],r,a)," / ").concat(m.P.formatDatePattern(t[1],r,a))}return null},S=g(function(){u.vF.logTraceUseMemo("TIME-SLIDER-PANEL - memoLayersList",v);return y.map(function(e){return{layerPath:e,timeSliderLayerInfo:null==v?void 0:v[e]}}).filter(function(e){return(null==e?void 0:e.timeSliderLayerInfo)&&!L(e.layerPath)&&e.timeSliderLayerInfo.isMainLayerPath}).map(function(e){var i,r,n,a,l=null===(i=e.timeSliderLayerInfo.additionalLayerpaths)||void 0===i?void 0:i.map(function(e){var t;return null===(t=c.K.findLayerByPath(b,e))||void 0===t?void 0:t.layerName}),o=l?", ".concat(l.join(", ")):"",s=e.timeSliderLayerInfo.title||"".concat(null===(r=c.K.findLayerByPath(b,e.layerPath))||void 0===r?void 0:r.layerName).concat(o)||"";return{layerName:s,layerPath:e.layerPath,layerFeatures:w(e.timeSliderLayerInfo),tooltip:(n=e.timeSliderLayerInfo,a=s,(0,h.jsxs)(d.Box,{sx:{display:"flex",alignContent:"center","& svg ":{width:"0.75em",height:"0.75em"}},children:[a,n.filtering&&": ".concat(w(n))]})),layerStatus:"loaded",queryStatus:"processed",layerUniqueId:"".concat(t,"-").concat(p.DF.TIME_SLIDER,"-").concat(e.layerPath)}})},[b,v,y,t,L]);return(0,h.jsx)(a.PE,{selectedLayerPath:x,onLayerListClicked:j,layerList:S,guideContentIds:["timeSlider"],children:x&&v&&x in v?(0,h.jsx)(f.p,{layerPath:x},x):null})}[a,l,o,s,c,d,u,f]=g.then?(await g)():g,r()}catch(v){r(v)}})},58938:e=>{e.exports={sliders:[]}},66844:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"GeoView Time Slider Config Schema","type":"object","version":1,"comments":"Configuration for GeoView time slider package.","additionalProperties":false,"properties":{"sliders":{"type":"array","items":{"type":"object","properties":{"layerPaths":{"type":"array","items":{"type":"string"},"minItems":1,"description":"Array of layer paths for the layers this time slider controls"},"fields":{"type":"array","items":{"type":"string"},"description":"Array of fields corresponding to the layerPaths above that this time slider uses to filter each layer."},"title":{"type":"string","default":"Time slider title","description":"The title to display"},"description":{"type":"string","default":"Time slider description","description":"The description to use."},"delay":{"type":"number","default":1000,"enum":[500,750,1000,1500,2000,3000,5000],"description":"Delay between advances when play button is pressed"},"filtering":{"type":"boolean","default":true,"description":"Whether the time slider is filtering the layer(s) on the map"},"locked":{"type":"boolean","default":false,"description":"Lock handle"},"reversed":{"type":"boolean","default":false,"description":"Reverse direction of the slider animation"},"timeDimension":{"additionalProperties":false,"type":"object","description":"OGC time dimension definition.","properties":{"field":{"type":"string"},"default":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":2},"displayPattern":{"type":"array","items":{"datePrecision":{"type":"string","enum":["","year","month","day"]},"timePrecision":{"type":"string","enum":["","hour","minute","second"]}}},"rangeItems":{"description":"Definition of the range object in the OGC time dimension.","additionalProperties":false,"type":"object","properties":{"type":{"type":"string"},"range":{"type":"array","items":{"type":"string"}}}},"nearestValues":{"enum":["discrete","absolute"]},"singleHandle":{"type":"boolean"},"unitSymbol":{"type":"string"}}}}}}},"required":["sliders"]}')},99597:(e,t,i)=>{i.a(e,async(e,t)=>{try{var r=i(64477),n=i(43549),a=i(51310),l=i(54074),o=i(98615),s=i(75509),c=i(30538),d=i(449),u=i(7291),p=i(40322),m=i(78953),f=i(53959),h=i(66844),g=i(58938),y=i(97282),v=e([d,u,p,m,f]);function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}function b(e,t,i,r){var n=(0,o.A)((0,l.A)(1&r?e.prototype:e),t,i);return 2&r&&"function"==typeof n?function(e){return n.apply(i,e)}:n}function j(e,t){w(e,t),t.add(e)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}[d,u,p,m,f]=v.then?(await v)():v;var x=new WeakSet,P=function(e){function t(){var e,i,n,o;(0,r.A)(this,t);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return i=this,n=t,o=[].concat(c),n=(0,l.A)(n),j(e=(0,a.A)(i,L()?Reflect.construct(n,o||[],(0,l.A)(i).constructor):n.apply(i,o)),x),e}return(0,s.A)(t,e),(0,n.A)(t,[{key:"schema",value:function(){return h}},{key:"defaultConfig",value:function(){return g}},{key:"defaultTranslations",value:function(){return{en:{timeSlider:{title:"Time Slider",panel:{noLayers:"No layers with temporal data"},slider:{unlockRight:"Unlock right handle",unlockLeft:"Unlock left handle",lockRight:"Lock right handle",lockLeft:"Lock left handle",filter:"Time Filtering",disableFilter:"Disable Time Filtering",enableFilter:"Enable Time Filtering",pauseAnimation:"Pause animation",playAnimation:"Play animation",back:"Back",forward:"Forward",changeDirection:"Change animation direction",timeDelay:"Animation delay",stepValue:"Step value",hour:"Hour",day:"Day",week:"Week",month:"Month",year:"Year"}}},fr:{timeSlider:{title:"Curseur Temporel",panel:{noLayers:"Pas de couches avec des données temporelles"},slider:{unlockRight:"Déverrouiller la poignée droite",unlockLeft:"Déverrouiller la poignée gauche",lockRight:"Verrouiller la poignée droite",lockLeft:"Verrouiller la poignée gauche",filter:"Filtrage temporel",disableFilter:"Désactiver le filtrage temporel",enableFilter:"Activer le filtrage temporel",pauseAnimation:"Pause de l'animation",playAnimation:"Jouer l'animation",back:"Retour",forward:"En avant",changeDirection:"Changer la direction de l'animation",timeDelay:"Délai d'animation",stepValue:"Valeur du saut",hour:"Heure",day:"Jour",week:"Semaine",month:"Mois",year:"Année"}}}}}},{key:"getConfig",value:function(){return b(t,"getConfig",this,3)([])}},{key:"onCreateContentProps",value:function(){return{id:"time-slider",value:this.value,label:"timeSlider.title",icon:(0,y.jsx)(u.TimeSliderIcon,{}),content:(0,y.jsx)(f.b,{mapId:this.mapViewer.mapId})}}},{key:"onAdd",value:function(){var e=this;this.mapViewer.mapReady?this.initTimeSliderPlugin():this.mapViewer.onMapReady(function(){e.initTimeSliderPlugin()}),b(t,"onAdd",this,3)([])}},{key:"initTimeSliderPlugin",value:function(){var e=this,t=this.mapViewer.layer.getLayerEntryLayerPaths(),i=S(x,this,k).call(this,t);i&&i.forEach(function(t){var i=e.mapViewer.layer.getGeoviewLayerIfExists(t),r=e.getConfig().sliders.find(function(e){return e.layerPaths.includes(t)});i instanceof d.Z&&m.t.checkInitTimeSliderLayerAndApplyFilters(e.mapViewer.mapId,i,r)})}}])}(p.b);function k(e){var t=this;return e.filter(function(e){var i=t.mapViewer.layer.getGeoviewLayerIfExists(e);if(i instanceof d.Z)return i.getTimeDimension()})}c===window.cgpv.reactUtilities.react&&(window.geoviewPlugins=window.geoviewPlugins||{},window.geoviewPlugins["time-slider"]=P),t()}catch(T){t(T)}})},99618:(e,t,i)=>{i.d(t,{S:()=>r});var r=function(e){return{panelHeaders:{fontSize:e.palette.geoViewFontSize.lg,fontWeight:"600",marginBottom:"20px"},rightPanelBtnHolder:{marginTop:"20px",marginBottom:"9px",boxShadow:"0px 12px 9px -13px #E0E0E0"}}}}},e=>{var t;t=99597,e(e.s=t)}]);
//# sourceMappingURL=geoview-time-slider.js.map