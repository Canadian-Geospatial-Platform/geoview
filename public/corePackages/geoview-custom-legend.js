/*! Package:geoview-custom-legend: 2.1.2 - "4ac3c18fbcb5235c2a510961cbe72ea7d4870345" - 2026-01-30T14:00:13.895Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[303],{18407:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{J:()=>p});var o=i(80006),r=i(36115),a=i(21065),s=i(64799),l=i(97282),c=e([r,a,s]);function p(e){var t=e.item,i=e.sxClasses,n=e.itemPath,c=window.cgpv.ui.elements.ListItem;return(0,o.jx)(t)?(0,l.jsx)(c,{sx:i.legendListItem,disablePadding:!0,children:(0,l.jsx)(a.a,{item:t})}):(0,o.FG)(t)?(0,l.jsx)(r.N,{item:t,sxClasses:i}):(0,o.jZ)(t)?(0,l.jsx)(s.N,{item:t,sxClasses:i,itemPath:n}):void 0}[r,a,s]=c.then?(await c)():c,n()}catch(d){n(d)}})},21065:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{a:()=>c});var o=i(58416),r=i(80006),a=i(97282),s=e([o]),l=s.then?(await s)():s;function c(e){var t=e.item;if((0,r.jx)(t))return(0,a.jsx)(o.$,{layerPath:t.layerPath})}o=l[0],n()}catch(p){n(p)}})},23207:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{J:()=>d});var o=i(30538),r=i(53109),a=i(52034),s=i(80006),l=i(95450),c=i(97282),p=e([r,l]);function d(e){var t=e.config.legendList,i=window.cgpv.ui,n=i.elements,p=n.Box,d=n.List,u=i.useTheme(),g=(0,o.useMemo)(function(){return(0,a.S)(u)},[u]),h=(0,r.t)();return(0,c.jsx)(p,{sx:g.container,children:(0,c.jsx)(d,{className:"legendList",sx:g.legendList,children:t.map(function(e,t){var i=(0,s.z3)(e,t,h);return(0,c.jsx)(l.Jv,{item:e,sxClasses:g,itemPath:i},i)})})})}[r,l]=p.then?(await p)():p,n()}catch(u){n(u)}})},36115:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{N:()=>u});var o=i(10379),r=i(97878),a=i(80006),s=i(97282),l=e([r]),c=l.then?(await l)():l;function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,o.A)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function u(e){var t=e.item,i=e.sxClasses,n=window.cgpv.ui.elements,o=n.Box,l=n.Typography;if((0,a.FG)(t)){var c=d(d({},t.fontSize&&{fontSize:"".concat(t.fontSize,"px")}),t.fontWeight&&{fontWeight:t.fontWeight});return(0,s.jsxs)(o,{sx:i.headerItem,children:[(0,s.jsx)(l,{sx:d(d({},i.headerText),c),children:t.text}),t.description&&(0,s.jsx)(r.M,{description:t.description,sxClasses:i})]})}}r=c[0],n()}catch(g){n(g)}})},37390:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://cgpv/custom-legend-schema","title":"GeoView Custom Legend Config Schema","type":"object","version":1,"comments":"Configuration for the GeoView custom legend package.","definitions":{"TypeCustomLegendConfig":{"type":"object","additionalProperties":false,"properties":{"isOpen":{"type":"boolean","description":"Whether the custom legend panel is initially open.","default":false},"title":{"type":"string","description":"The text for the legend title"},"legendList":{"type":"array","description":"Ordered list of custom legend items to render.","items":{"$ref":"#/definitions/TypeLegendItem"},"default":[]},"version":{"type":"string","enum":["1.0"],"description":"Schema version used to validate this configuration."}},"required":["legendList"]},"TypeLegendItem":{"description":"Union type for all possible legend item types.","oneOf":[{"$ref":"#/definitions/TypeLegendLayer"},{"$ref":"#/definitions/TypeHeaderLayer"},{"$ref":"#/definitions/TypeGroupLayer"}]},"TypeLegendLayer":{"description":"A standard legend item from geoview-core.","type":"object","additionalProperties":false,"properties":{"type":{"const":"layer","description":"Discriminator field for legend layer items."},"layerPath":{"type":"string","description":"The layer path for the layer"}},"required":["type","layerPath"]},"TypeHeaderLayer":{"description":"A header text item for organizing legend sections.","type":"object","additionalProperties":false,"properties":{"type":{"const":"header","description":"Discriminator field for header items."},"text":{"type":"string","description":"The header layer text"},"description":{"$ref":"#/definitions/TypeDescription"},"fontSize":{"type":"number","description":"Font size in pixels.","default":16,"minimum":8,"maximum":32},"fontWeight":{"type":"string","enum":["normal","bold"],"default":"bold"}},"required":["type","headerText"]},"TypeGroupLayer":{"description":"A collapsible group containing other legend items.","type":"object","additionalProperties":false,"properties":{"type":{"const":"group","description":"Discriminator field for group items."},"text":{"type":"string","description":"The group layer text"},"description":{"$ref":"#/definitions/TypeDescription"},"collapsed":{"type":"boolean","description":"Whether the group is initially collapsed.","default":false},"children":{"type":"array","description":"Child legend items within this group.","items":{"$ref":"#/definitions/TypeLegendItem"},"minItems":1}},"required":["type","groupTitle","children"]},"TypeDescription":{"description":"The description configuration","type":"object","properties":{"text":{"type":"string","description":"The text for the description that will be displayed"},"collpased":{"type":"boolean","description":"Whether the description should be collapsed by default","default":false}},"required":["text"]}},"description":"Root schema for custom legend configuration."}')},52034:(e,t,i)=>{i.d(t,{S:()=>n});var n=function(e){return{container:{padding:"16px",display:"flex",flexDirection:"column",height:"calc(100% - 47px)",overflowY:"auto",overflowX:"hidden",background:e.palette.geoViewColor.bgColor.main},legendList:{paddingRight:"0.65rem"},legendListItem:{padding:"6px 4px",flexDirection:"column",alignItems:"flex-start","& .MuiCollapse-vertical":{marginLeft:"6px"},"& .MuiListItemButton-root:hover":{backgroundColor:"transparent"}},headerItem:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",borderBottom:"1px solid ".concat(e.palette.geoViewColor.grey.light[800]),padding:"8px 4px"},headerText:{fontSize:e.palette.geoViewFontSize.md,fontWeight:"600",color:e.palette.geoViewColor.textColor.main,maxWidth:"400px"},groupChildren:{paddingLeft:"16px",marginTop:0,width:"100%","& .MuiCollapse-vertical":{marginLeft:"6px"}},groupTitle:{textWrapMode:"wrap",fontSize:"1.125rem",fontWeight:"700",lineHeight:1.2,textOverflow:"ellipsis",color:e.palette.geoViewColor.textColor.main,maxWidth:"400px"},groupItemButton:{padding:"6px 4px",width:"100%","&:hover":{backgroundColor:e.palette.geoViewColor.bgColor.light[300]},cursor:"default","&.MuiListItemButton-root":{paddingLeft:"4px",paddingRight:"4px"}},groupIcon:{border:"1px solid #515BA5",backgroundColor:e.palette.geoViewColor.bgColor.light[800],padding:"2px",maxWidth:"1.875rem",maxHeight:"1.875rem",transform:"scaleX(-1)",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center"},groupSubLayerCount:{display:"block",color:"#393939",fontSize:"14px",margin:"0px"},groupButtonRow:{display:"flex",alignItems:"center",gap:"4px",marginTop:"8px","& .MuiSvgIcon-root":{fontSize:"1.25rem"}},groupCollapseButton:{display:"flex",alignItems:"center"},descriptionContainer:{display:"flex",flexDirection:"row"},descriptionToggleRow:{display:"flex",alignItems:"center",gap:"4px"},descriptionToggleButton:{padding:0},descriptionToggleText:{fontSize:"0.75rem",fontStyle:"italic",fontWeight:300,color:e.palette.geoViewColor.textColor.dark,cursor:"pointer"},descriptionText:{fontSize:"0.875rem",fontStyle:"italic",fontWeight:300,color:e.palette.geoViewColor.textColor.dark,marginTop:"4px",marginLeft:"16px",maxWidth:"400px"},descriptionCollapse:{marginLeft:"0 !important","& .MuiCollapse-vertical":{marginLeft:"0 !important"}}}}},59671:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{i:()=>g});var o=i(64477),r=i(43549),a=i(51310),s=i(54074),l=i(98615),c=i(75509),p=i(10379),d=i(58117),u=e([d]);function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}var g=function(e){function t(){var e,i,n,r;(0,o.A)(this,t);for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return i=this,n=t,r=[].concat(c),n=(0,s.A)(n),e=(0,a.A)(i,h()?Reflect.construct(n,r||[],(0,s.A)(i).constructor):n.apply(i,r)),(0,p.A)(e,"buttonPanel",void 0),(0,p.A)(e,"buttonProps",void 0),(0,p.A)(e,"panelProps",void 0),e}return(0,c.A)(t,e),(0,r.A)(t,[{key:"getConfig",value:function(){return(e=t,i="getConfig",n=this,o=3,r=(0,l.A)((0,s.A)(1&o?e.prototype:e),i,n),2&o&&"function"==typeof r?function(e){return r.apply(n,e)}:r)([]);var e,i,n,o,r}},{key:"onCreateButtonProps",value:function(){var e=window.cgpv.ui.elements.MapIcon;return{id:"somePluginButton","aria-label":"Some aria label",tooltip:"Some tooltip",tooltipPlacement:"right",children:this.react.createElement(e),visible:!0}}},{key:"onCreateContentProps",value:function(){return{title:"Some title",icon:'<i class="material-icons">map</i>',width:100,status:this.getConfig().isOpen}}},{key:"onCreateContent",value:function(){return this.react.createElement("div",void 0,"Content for AppBar Plugin on map id ".concat(this.mapViewer.mapId," goes here..."))}},{key:"onAdd",value:function(){this.buttonProps=this.onCreateButtonProps(),this.panelProps=this.onCreateContentProps(),this.panelProps.content=this.onCreateContent(),this.buttonPanel=this.mapViewer.appBarApi.createAppbarPanel(this.buttonProps,this.panelProps)||void 0}},{key:"onRemove",value:function(){this.buttonPanel&&this.mapViewer.appBarApi.removeAppbarPanel(this.buttonPanel.buttonPanelId)}}])}((d=(u.then?(await u)():u)[0]).G);n()}catch(f){n(f)}})},64799:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{N:()=>f});var o=i(6416),r=i(76092),a=i(53109),s=i(2608),l=i(3691),c=i(80006),p=i(18407),d=i(97878),u=i(97282),g=e([a,s,l,p,d]);function h(e){var t=[];return e.forEach(function(e){(0,c.jx)(e)?t.push(e.layerPath):(0,c.jZ)(e)&&t.push.apply(t,(0,r.A)(h(e.children)))}),t}function f(e){var t,i=e.item,n=e.sxClasses,r=e.itemPath,g=window.cgpv,f=g.ui,m=g.reactUtilities.react,x=m.useState,y=m.useMemo,v=f.elements,C=v.Box,w=v.ListItem,b=v.ListItemIcon,j=v.ListItemButton,L=v.IconButton,P=v.Collapse,T=v.Typography,I=v.LayerGroupIcon,A=v.VisibilityOutlinedIcon,S=v.VisibilityOffOutlinedIcon,O=v.KeyboardArrowDownIcon,B=v.KeyboardArrowUpIcon,k=(0,a.t)(),z=(0,s.U6)().setOrToggleLayerVisibility,D=x(!!(0,c.jZ)(i)&&(null!==(t=i.collapsed)&&void 0!==t&&t)),M=(0,o.A)(D,2),V=M[0],W=M[1],R=y(function(){return h(i.children)},[i.children]),$=(0,s.fZ)(R);if((0,c.jZ)(i)){var G=r||i.itemId||"group-".concat(i.text.toLowerCase().replace(/\s+/g,"-"));return(0,u.jsx)(w,{sx:n.legendListItem,disablePadding:!0,className:"layerListItem groupItem",children:(0,u.jsxs)(C,{sx:{width:"100%"},children:[(0,u.jsxs)(j,{disableRipple:!0,sx:n.groupItemButton,className:"layerListItemButton groupHeader",children:[(0,u.jsx)(b,{sx:{alignSelf:"center"},children:(0,u.jsx)(C,{sx:{display:"flex",padding:"0 18px 0 18px",margin:"0 -18px 0 -18px"},children:(0,u.jsx)(C,{sx:n.groupIcon,children:(0,u.jsx)(I,{})})})}),(0,u.jsxs)(C,{sx:{flex:1},children:[(0,u.jsx)(T,{noWrap:!0,sx:n.groupTitle,children:i.text}),i.description&&(0,u.jsx)(d.M,{description:i.description,sxClasses:n}),(0,u.jsxs)(T,{variant:"caption",sx:n.groupSubLayerCount,children:[i.children.length," ",1===i.children.length?(0,l.getLocalizedMessage)(k,"CustomLegend.layer"):(0,l.getLocalizedMessage)(k,"CustomLegend.sublayers")]}),(0,u.jsx)(C,{sx:n.groupButtonRow,children:(0,u.jsx)(L,{onClick:function(){var e=!$;R.forEach(function(t){z(t,e)})},size:"small","aria-label":(0,l.getLocalizedMessage)(k,"layers.toggleVisibility"),sx:{padding:"4px"},children:$?(0,u.jsx)(A,{}):(0,u.jsx)(S,{})})})]}),(0,u.jsx)(C,{sx:{alignSelf:"center"},children:(0,u.jsx)(L,{onClick:function(){W(function(e){return!e})},size:"small","aria-label":(0,l.getLocalizedMessage)(k,"layers.toggleCollapse"),sx:{padding:"4px"},children:V?(0,u.jsx)(O,{}):(0,u.jsx)(B,{})})})]}),(0,u.jsx)(P,{in:!V,children:(0,u.jsx)(C,{sx:n.groupChildren,children:i.children.map(function(e,t){var i=(0,c.z3)(e,t,k);return(0,u.jsx)(p.J,{item:e,sxClasses:n,itemPath:"".concat(G,"/").concat(i)},i)})})})]})})}}[a,s,l,p,d]=g.then?(await g)():g,n()}catch(m){n(m)}})},74069:e=>{e.exports=JSON.parse('{"id":"custom-legend","enabled":true,"isOpen":false,"legendList":[],"version":"1.0"}')},74843:(e,t,i)=>{i.a(e,async(e,t)=>{try{var n=i(64477),o=i(43549),r=i(51310),a=i(54074),s=i(98615),l=i(75509),c=i(10379),p=i(30538),d=i(59671),u=i(17586),g=i(23207),h=i(37390),f=i(74069),m=i(97282),x=e([d,g]);function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}[d,g]=x.then?(await x)():x;var y=function(e){function t(){var e,i,o,s;(0,n.A)(this,t);for(var l=arguments.length,p=new Array(l),d=0;d<l;d++)p[d]=arguments[d];return i=this,o=t,s=[].concat(p),o=(0,a.A)(o),e=(0,r.A)(i,v()?Reflect.construct(o,s||[],(0,a.A)(i).constructor):o.apply(i,s)),(0,c.A)(e,"onCreateContent",function(){return(0,m.jsx)(g.J,{config:e.getConfig()})}),e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"schema",value:function(){return h}},{key:"defaultConfig",value:function(){return f}},{key:"defaultTranslations",value:function(){return{en:{CustomLegend:{title:"Legend",layer:"layer",sublayers:"sublayers",descriptionToggle:"Toggle description",showDescription:"Show description",hideDescription:"Hide description"}},fr:{CustomLegend:{title:"LÃ©gende",layer:"couche",sublayers:"sous-couches",descriptionToggle:"Basculer la description",showDescription:"Afficher la description",hideDescription:"Masquer la description"}}}}},{key:"getConfig",value:function(){return(e=t,i="getConfig",n=this,o=3,r=(0,s.A)((0,a.A)(1&o?e.prototype:e),i,n),2&o&&"function"==typeof r?function(e){return r.apply(n,e)}:r)([]);var e,i,n,o,r}},{key:"onCreateButtonProps",value:function(){return{id:"custom-legend",tooltip:"CustomLegend.title",tooltipPlacement:"right",children:(0,m.jsx)(u.h8,{}),visible:!0,"aria-label":"CustomLegend.title"}}},{key:"onCreateContentProps",value:function(){var e,t=this.getConfig();return{title:null!==(e=t.title)&&void 0!==e?e:"CustomLegend.title",icon:(0,m.jsx)(u.h8,{}),width:"350px",status:t.isOpen}}},{key:"onRemoved",value:function(){}}])}(d.i);p===window.cgpv.reactUtilities.react&&(window.geoviewPlugins=window.geoviewPlugins||{},window.geoviewPlugins["custom-legend"]=y),t()}catch(C){t(C)}})},80006:(e,t,i)=>{i.d(t,{FG:()=>o,jZ:()=>r,jx:()=>n,z3:()=>a});var n=function(e){return"layer"===e.type},o=function(e){return"header"===e.type},r=function(e){return"group"===e.type};function a(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=a?"".concat(a,"/"):"";return n(e)?"".concat(s).concat(e.layerPath):o(e)?e.itemId||"".concat(s,"header-").concat(e.text.toLowerCase().replace(/\s+/g,"-"),"-").concat(t):r(e)?e.itemId||"".concat(s,"group-").concat(e.text.toLowerCase().replace(/\s+/g,"-"),"-").concat(t):"".concat(s,"item-").concat(t)}},95450:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{Jv:()=>s.J});var o=i(36115),r=i(21065),a=i(64799),s=i(18407),l=i(97878),c=e([o,r,a,s,l]);[o,r,a,s,l]=c.then?(await c)():c,n()}catch(e){n(e)}})},97878:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{M:()=>p});var o=i(6416),r=i(30538),a=i(53109),s=i(3691),l=i(97282),c=e([a,s]);function p(e){var t=e.description,i=e.sxClasses,n=window.cgpv.ui.elements,c=n.Box,p=n.Typography,d=n.KeyboardArrowDownIcon,u=n.KeyboardArrowUpIcon,g=n.IconButton,h=n.Collapse,f=(0,a.t)(),m=(0,r.useState)(!t.collapsed),x=(0,o.A)(m,2),y=x[0],v=x[1],C=function(){v(!y)};return(0,l.jsxs)(c,{children:[(0,l.jsxs)(c,{sx:i.descriptionContainer,children:[(0,l.jsx)(g,{size:"small",onClick:C,"aria-label":(0,s.getLocalizedMessage)(f,"CustomLegend.descriptionToggle"),sx:i.descriptionToggleButton,children:y?(0,l.jsx)(u,{fontSize:"small"}):(0,l.jsx)(d,{fontSize:"small"})}),(0,l.jsx)(p,{sx:i.descriptionToggleText,onClick:C,children:y?(0,s.getLocalizedMessage)(f,"CustomLegend.hideDescription"):(0,s.getLocalizedMessage)(f,"CustomLegend.showDescription")})]}),(0,l.jsx)(h,{in:y,sx:i.descriptionCollapse,children:(0,l.jsx)(p,{sx:i.descriptionText,children:t.text})})]})}[a,s]=c.then?(await c)():c,n()}catch(d){n(d)}})}},e=>{var t;t=74843,e(e.s=t)}]);
//# sourceMappingURL=geoview-custom-legend.js.map