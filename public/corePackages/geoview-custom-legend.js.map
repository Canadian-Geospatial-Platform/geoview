{"version":3,"file":"corePackages/geoview-custom-legend.js","mappings":"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","sources":["webpack://geoview-core/../geoview-custom-legend/src/components/legend-item.tsx","webpack://geoview-core/../geoview-custom-legend/src/components/layer-item.tsx","webpack://geoview-core/../geoview-custom-legend/src/custom-legend-panel.tsx","webpack://geoview-core/../geoview-custom-legend/src/components/header-item.tsx","webpack://geoview-core/../geoview-custom-legend/src/custom-legend-style.ts","webpack://geoview-core/./src/api/plugin/appbar-plugin.ts","webpack://geoview-core/../geoview-custom-legend/src/components/group-item.tsx","webpack://geoview-core/../geoview-custom-legend/src/index.tsx","webpack://geoview-core/../geoview-custom-legend/src/custom-legend-types.ts","webpack://geoview-core/../geoview-custom-legend/src/components/description-text.tsx"],"sourcesContent":["import type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport type { TypeLegendItem } from '../custom-legend-types';\nimport { isLegendLayer, isHeaderLayer, isGroupLayer } from '../custom-legend-types';\nimport type { getSxClasses } from '../custom-legend-style';\nimport { HeaderItem } from './header-item';\nimport { LegendLayerItem } from './layer-item';\nimport { GroupItem } from './group-item';\n\ninterface LegendItemProps {\n  item: TypeLegendItem;\n  sxClasses: ReturnType<typeof getSxClasses>;\n  itemPath?: string;\n}\n\n/**\n * Renders a single legend item based on its type.\n * @function LegendItem\n * @param {LegendItemProps} props - Component props\n * @returns {JSX.Element | undefined} The rendered item\n */\nexport function LegendItem({ item, sxClasses, itemPath }: LegendItemProps): JSX.Element | undefined {\n  const { cgpv } = window as TypeWindow;\n  const { ui } = cgpv;\n  const { ListItem } = ui.elements;\n\n  if (isLegendLayer(item)) {\n    return (\n      <ListItem sx={sxClasses.legendListItem} disablePadding>\n        <LegendLayerItem item={item} />\n      </ListItem>\n    );\n  }\n\n  if (isHeaderLayer(item)) {\n    return <HeaderItem item={item} sxClasses={sxClasses} />;\n  }\n\n  if (isGroupLayer(item)) {\n    return <GroupItem item={item} sxClasses={sxClasses} itemPath={itemPath} />;\n  }\n\n  return;\n}\n","import { LegendLayer } from 'geoview-core/core/components/legend/legend-layer';\nimport type { TypeLegendItem } from '../custom-legend-types';\nimport { isLegendLayer } from '../custom-legend-types';\n\ninterface LegendLayerItemProps {\n  item: TypeLegendItem;\n}\n\n/**\n * Renders a legend layer item from geoview-core.\n * @param {LegendLayerItemProps} props - Component props\n * @returns {JSX.Element | undefined} The rendered legend layer\n */\nexport function LegendLayerItem({ item }: LegendLayerItemProps): JSX.Element | undefined {\n  if (!isLegendLayer(item)) return;\n\n  return <LegendLayer layerPath={item.layerPath} />;\n}\n","import { useMemo } from 'react';\n\nimport type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport { useAppDisplayLanguage } from 'geoview-core/core/stores/store-interface-and-intial-values/app-state';\n\nimport { getSxClasses } from './custom-legend-style';\nimport type { TypeCustomLegendConfig } from './custom-legend-types';\nimport { generateLegendItemId } from './custom-legend-types';\nimport { LegendItem } from './components';\n\ninterface CustomLegendPanelProps {\n  config: TypeCustomLegendConfig;\n}\n\n/**\n * Main custom legend panel component.\n * @param {CustomLegendPanelProps} props - Component props\n * @returns {JSX.Element} The rendered panel\n */\nexport function CustomLegendPanel(props: CustomLegendPanelProps): JSX.Element {\n  const { config } = props;\n  const { legendList } = config;\n\n  const { cgpv } = window as TypeWindow;\n  const { ui } = cgpv;\n  const { Box, List } = ui.elements;\n\n  const theme = ui.useTheme();\n  const sxClasses = useMemo(() => getSxClasses(theme), [theme]);\n\n  const appDisplayLanguage = useAppDisplayLanguage();\n\n  return (\n    <Box sx={sxClasses.container}>\n      <List className=\"legendList\" sx={sxClasses.legendList}>\n        {legendList.map((item, index) => {\n          const itemId = generateLegendItemId(item, index, appDisplayLanguage);\n          return <LegendItem key={itemId} item={item} sxClasses={sxClasses} itemPath={itemId} />;\n        })}\n      </List>\n    </Box>\n  );\n}\n","import type { TypeWindow } from 'geoview-core/core/types/global-types';\n\nimport { DescriptionText } from './description-text';\nimport type { TypeHeaderLayer } from '../custom-legend-types';\nimport { isHeaderLayer } from '../custom-legend-types';\nimport type { getSxClasses } from '../custom-legend-style';\n\ninterface HeaderItemProps {\n  item: TypeHeaderLayer;\n  sxClasses: ReturnType<typeof getSxClasses>;\n}\n\n/**\n * Renders a header item.\n * @param {HeaderItemProps} props - Component props\n * @returns {JSX.Element | undefined} The rendered header\n */\nexport function HeaderItem({ item, sxClasses }: HeaderItemProps): JSX.Element | undefined {\n  const { cgpv } = window as TypeWindow;\n  const { ui } = cgpv;\n  const { Box, Typography } = ui.elements;\n\n  if (!isHeaderLayer(item)) return;\n\n  // Create the override object and if values are present, they will override the default values\n  const styleOverrides = {\n    ...(item.fontSize && { fontSize: `${item.fontSize}px` }),\n    ...(item.fontWeight && { fontWeight: item.fontWeight }),\n  };\n\n  return (\n    <Box sx={sxClasses.headerItem}>\n      <Typography sx={{ ...sxClasses.headerText, ...styleOverrides }}>{item.text}</Typography>\n      {item.description && <DescriptionText description={item.description} sxClasses={sxClasses} />}\n    </Box>\n  );\n}\n","type SxClasses = Record<string, object>;\n\n/**\n * Get custom sx classes for the legend\n *\n * @param {any} theme the theme object\n * @returns {Object} the sx classes object\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const getSxClasses = (theme: any): SxClasses => ({\n  // Main container styles\n  container: {\n    padding: '16px',\n    display: 'flex',\n    flexDirection: 'column',\n    height: 'calc(100% - 47px)',\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    background: theme.palette.geoViewColor.bgColor.main,\n  },\n\n  // List container for legend items\n  legendList: {\n    paddingRight: '0.65rem',\n  },\n\n  // Individual legend list item\n  legendListItem: {\n    padding: '6px 4px',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    '& .MuiCollapse-vertical': {\n      marginLeft: '6px',\n    },\n    '& .MuiListItemButton-root:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n\n  // Used by HeaderItem component\n  headerItem: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    borderBottom: `1px solid ${theme.palette.geoViewColor.grey.light[800]}`,\n    padding: '8px 4px',\n  },\n\n  // Header text styling\n  headerText: {\n    fontSize: theme.palette.geoViewFontSize.md,\n    fontWeight: '600',\n    color: theme.palette.geoViewColor.textColor.main,\n    maxWidth: '400px',\n  },\n\n  // Group children container\n  groupChildren: {\n    paddingLeft: '16px',\n    marginTop: 0,\n    width: '100%',\n    '& .MuiCollapse-vertical': {\n      marginLeft: '6px',\n    },\n  },\n\n  // Group title styling\n  groupTitle: {\n    textWrapMode: 'wrap',\n    fontSize: '1.125rem', // 18px\n    fontWeight: '700',\n    lineHeight: 1.2,\n    textOverflow: 'ellipsis',\n    color: theme.palette.geoViewColor.textColor.main,\n    maxWidth: '400px',\n  },\n\n  // Group item button\n  groupItemButton: {\n    padding: '6px 4px',\n    width: '100%',\n    '&:hover': {\n      backgroundColor: theme.palette.geoViewColor.bgColor.light[300],\n    },\n    cursor: 'default',\n    '&.MuiListItemButton-root': {\n      paddingLeft: '4px',\n      paddingRight: '4px',\n    },\n  },\n\n  // Group icon styling\n  groupIcon: {\n    border: '1px solid #515BA5',\n    backgroundColor: theme.palette.geoViewColor.bgColor.light[800],\n    padding: '2px',\n    maxWidth: '1.875rem',\n    maxHeight: '1.875rem',\n    transform: 'scaleX(-1)', // Mirror to face right\n    borderRadius: '5px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n\n  // Sublayer count caption\n  groupSubLayerCount: {\n    display: 'block',\n    color: '#393939',\n    fontSize: '14px',\n    margin: '0px',\n  },\n\n  // Group button row with smaller icons\n  groupButtonRow: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '4px',\n    marginTop: '8px',\n    '& .MuiSvgIcon-root': {\n      fontSize: '1.25rem',\n    },\n  },\n\n  // Collapse button container\n  groupCollapseButton: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n\n  descriptionContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n\n  descriptionToggleRow: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '4px',\n  },\n\n  descriptionToggleButton: {\n    padding: 0,\n  },\n\n  descriptionToggleText: {\n    fontSize: '0.75rem',\n    fontStyle: 'italic',\n    fontWeight: 300,\n    color: theme.palette.geoViewColor.textColor.dark,\n    cursor: 'pointer',\n  },\n\n  descriptionText: {\n    fontSize: '0.875rem',\n    fontStyle: 'italic',\n    fontWeight: 300,\n    color: theme.palette.geoViewColor.textColor.dark,\n    marginTop: '4px',\n    marginLeft: '16px',\n    maxWidth: '400px',\n  },\n\n  // Reset margins for description text (important for group descriptions)\n  descriptionCollapse: {\n    marginLeft: '0 !important',\n    '& .MuiCollapse-vertical': {\n      marginLeft: '0 !important',\n    },\n  },\n});\n","import type { TypeWindow } from '@/core/types/global-types';\nimport type { TypeButtonPanel, TypePanelProps } from '@/ui/panel/panel-types';\nimport type { IconButtonPropsExtend } from '@/ui/icon-button/icon-button';\nimport { AbstractPlugin } from './abstract-plugin';\n\n/**\n * AppBar Plugin abstract class.\n */\nexport abstract class AppBarPlugin extends AbstractPlugin {\n  // Store the created button panel object\n  buttonPanel?: TypeButtonPanel;\n\n  // Store the button props\n  buttonProps?: IconButtonPropsExtend;\n\n  // Store the panel props\n  panelProps?: TypePanelProps;\n\n  /**\n   * Overrides the get config\n   * @override\n   * @returns {AppBarPluginConfig} The config\n   */\n  override getConfig(): AppBarPluginConfig {\n    return super.getConfig() as AppBarPluginConfig;\n  }\n\n  /**\n   * Overridable function to create app bar button props content\n   * @returns IconButtonPropsExtend The app bar button props content\n   */\n  protected onCreateButtonProps(): IconButtonPropsExtend {\n    // Override this to create the button props..\n\n    // Get cgpv\n    const { cgpv } = window as TypeWindow;\n    const { MapIcon } = cgpv.ui.elements;\n\n    // Return dummy plugin button\n    return {\n      id: 'somePluginButton',\n      'aria-label': 'Some aria label',\n      tooltip: 'Some tooltip',\n      tooltipPlacement: 'right',\n      children: this.react.createElement(MapIcon),\n      visible: true,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar props content\n   * @returns TypePanelProps The app bar props content\n   */\n  protected onCreateContentProps(): TypePanelProps {\n    // Override this to create the panel props..\n\n    // Panel props\n    return {\n      title: 'Some title',\n      icon: '<i class=\"material-icons\">map</i>',\n      width: 100,\n      status: this.getConfig().isOpen,\n    };\n  }\n\n  /**\n   * Overridable function to create app bar actual content\n   * @returns JSX.Element The app bar actual content\n   */\n  protected onCreateContent(): JSX.Element {\n    // Override this to create panel..\n\n    // Return dummy content\n    return this.react.createElement('div', undefined, `Content for AppBar Plugin on map id ${this.mapViewer.mapId} goes here...`);\n  }\n\n  /**\n   * Called when an app bar plugin is being added\n   */\n  protected onAdd(): void {\n    // Create button props\n    this.buttonProps = this.onCreateButtonProps();\n\n    // Create panel props\n    this.panelProps = this.onCreateContentProps();\n\n    // Create content\n    this.panelProps.content = this.onCreateContent();\n\n    // Create a new button panel on the app-bar\n    this.buttonPanel = this.mapViewer.appBarApi.createAppbarPanel(this.buttonProps, this.panelProps) || undefined;\n  }\n\n  /**\n   * Called when an app bar plugin is being removed\n   */\n  protected onRemove(): void {\n    // If cgpv exists\n    if (this.buttonPanel) {\n      // Remove the app bar panel\n      this.mapViewer.appBarApi.removeAppbarPanel(this.buttonPanel.buttonPanelId);\n    }\n  }\n}\n\nexport type AppBarPluginConfig = {\n  isOpen: boolean;\n};\n","import type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport { useAppDisplayLanguage } from 'geoview-core/core/stores/store-interface-and-intial-values/app-state';\nimport {\n  useMapStoreActions,\n  useMapSelectorLayerArrayVisibility,\n} from 'geoview-core/core/stores/store-interface-and-intial-values/map-state';\nimport { getLocalizedMessage } from 'geoview-core/core/utils/utilities';\n\nimport type { TypeGroupLayer, TypeLegendItem } from '../custom-legend-types';\nimport { isGroupLayer, generateLegendItemId, isLegendLayer } from '../custom-legend-types';\nimport type { getSxClasses } from '../custom-legend-style';\nimport { LegendItem } from './legend-item';\nimport { DescriptionText } from './description-text';\n\ninterface GroupItemProps {\n  item: TypeGroupLayer;\n  sxClasses: ReturnType<typeof getSxClasses>;\n  itemPath?: string;\n}\n\n/**\n * Recursively collect all legend layer paths from group children.\n * @param {TypeLegendItem[]} children - The children to collect from\n * @returns {string[]} Array of layer paths\n */\nfunction collectLayerPaths(children: TypeLegendItem[]): string[] {\n  const paths: string[] = [];\n\n  children.forEach((child) => {\n    if (isLegendLayer(child)) {\n      paths.push(child.layerPath);\n    } else if (isGroupLayer(child)) {\n      // Recursively collect from nested groups\n      paths.push(...collectLayerPaths(child.children));\n    }\n  });\n\n  return paths;\n}\n\n/**\n * Renders a group item with collapsible children.\n * @param {GroupItemProps} props - Component props\n * @returns {JSX.Element | undefined} The rendered group\n */\nexport function GroupItem({ item, sxClasses, itemPath }: GroupItemProps): JSX.Element | undefined {\n  const { cgpv } = window as TypeWindow;\n  const { ui, reactUtilities } = cgpv;\n  const { useState, useMemo } = reactUtilities.react;\n  const {\n    Box,\n    ListItem,\n    ListItemIcon,\n    ListItemButton,\n    IconButton,\n    Collapse,\n    Typography,\n    LayerGroupIcon,\n    VisibilityOutlinedIcon,\n    VisibilityOffOutlinedIcon,\n    KeyboardArrowDownIcon,\n    KeyboardArrowUpIcon,\n  } = ui.elements;\n\n  const displayLanguage = useAppDisplayLanguage();\n  const { setOrToggleLayerVisibility } = useMapStoreActions();\n\n  const [collapsed, setCollapsed] = useState<boolean>(isGroupLayer(item) ? (item.collapsed ?? false) : false);\n\n  // Collect all layer paths from children\n  const layerPaths = useMemo(() => collectLayerPaths(item.children), [item.children]);\n\n  // Check if all child layers are visible\n  const allVisible = useMapSelectorLayerArrayVisibility(layerPaths);\n\n  if (!isGroupLayer(item)) return;\n\n  const handleToggleCollapse = (): void => {\n    setCollapsed((prev) => !prev);\n  };\n\n  const handleToggleVisibility = (): void => {\n    const newVisibility = !allVisible;\n\n    // Toggle all child layers\n    layerPaths.forEach((layerPath) => {\n      setOrToggleLayerVisibility(layerPath, newVisibility);\n    });\n  };\n\n  // Get current item text and path for children\n  const currentPath = itemPath || item.itemId || `group-${item.text.toLowerCase().replace(/\\s+/g, '-')}`;\n\n  return (\n    <ListItem sx={sxClasses.legendListItem} disablePadding className=\"layerListItem groupItem\">\n      <Box sx={{ width: '100%' }}>\n        <ListItemButton disableRipple sx={sxClasses.groupItemButton} className=\"layerListItemButton groupHeader\">\n          {/* Group Icon*/}\n          <ListItemIcon sx={{ alignSelf: 'center' }}>\n            <Box sx={{ display: 'flex', padding: '0 18px 0 18px', margin: '0 -18px 0 -18px' }}>\n              <Box sx={sxClasses.groupIcon}>\n                <LayerGroupIcon />\n              </Box>\n            </Box>\n          </ListItemIcon>\n\n          {/* Title, subtext, and visibility button */}\n          <Box sx={{ flex: 1 }}>\n            {/* Group title */}\n            <Typography noWrap sx={sxClasses.groupTitle}>\n              {item.text}\n            </Typography>\n\n            {/* Description */}\n            {item.description && <DescriptionText description={item.description} sxClasses={sxClasses} />}\n\n            {/* Sublayer count */}\n            <Typography variant=\"caption\" sx={sxClasses.groupSubLayerCount}>\n              {item.children.length}{' '}\n              {item.children.length === 1\n                ? getLocalizedMessage(displayLanguage, 'CustomLegend.layer')\n                : getLocalizedMessage(displayLanguage, 'CustomLegend.sublayers')}\n            </Typography>\n\n            {/* Action buttons */}\n            <Box sx={sxClasses.groupButtonRow}>\n              <IconButton\n                onClick={handleToggleVisibility}\n                size=\"small\"\n                aria-label={getLocalizedMessage(displayLanguage, 'layers.toggleVisibility')}\n                sx={{ padding: '4px' }}\n              >\n                {allVisible ? <VisibilityOutlinedIcon /> : <VisibilityOffOutlinedIcon />}\n              </IconButton>\n            </Box>\n          </Box>\n\n          {/* Collapse button */}\n          <Box sx={{ alignSelf: 'center' }}>\n            <IconButton\n              onClick={handleToggleCollapse}\n              size=\"small\"\n              aria-label={getLocalizedMessage(displayLanguage, 'layers.toggleCollapse')}\n              sx={{ padding: '4px' }}\n            >\n              {collapsed ? <KeyboardArrowDownIcon /> : <KeyboardArrowUpIcon />}\n            </IconButton>\n          </Box>\n        </ListItemButton>\n\n        {/* Collapsible children */}\n        <Collapse in={!collapsed}>\n          <Box sx={sxClasses.groupChildren}>\n            {item.children.map((child, index) => {\n              const childId = generateLegendItemId(child, index, displayLanguage);\n              return <LegendItem key={childId} item={child} sxClasses={sxClasses} itemPath={`${currentPath}/${childId}`} />;\n            })}\n          </Box>\n        </Collapse>\n      </Box>\n    </ListItem>\n  );\n}\n","import React from 'react'; // GV This import is to validate that we're on the right React at the end of the file\nimport { AppBarPlugin } from 'geoview-core/api/plugin/appbar-plugin';\nimport { LegendIcon } from 'geoview-core/ui/icons';\nimport type { IconButtonPropsExtend } from 'geoview-core/ui/icon-button/icon-button';\nimport type { TypePanelProps } from 'geoview-core/ui/panel/panel-types';\nimport type { TypeCustomLegendConfig } from './custom-legend-types';\nimport { CustomLegendPanel } from './custom-legend-panel';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-custom-legend.json';\n\n/**\n * Create a class for the plugin instance\n */\nclass CustomLegendPanelPlugin extends AppBarPlugin {\n  /**\n   * Return the package schema\n   *\n   * @returns {unknown} the package schema\n   */\n  override schema(): unknown {\n    return schema;\n  }\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {unknown} the default config\n   */\n  override defaultConfig(): unknown {\n    return defaultConfig;\n  }\n\n  /**\n   * Overrides the default translations for the Plugin.\n   * @returns {Record<string, unknown>} - The translations object for the particular Plugin.\n   */\n  override defaultTranslations(): Record<string, unknown> {\n    return {\n      en: {\n        CustomLegend: {\n          title: 'Legend',\n          layer: 'layer',\n          sublayers: 'sublayers',\n          descriptionToggle: 'Toggle description',\n          showDescription: 'Show description',\n          hideDescription: 'Hide description',\n        },\n      },\n      fr: {\n        CustomLegend: {\n          title: 'LÃ©gende',\n          layer: 'couche',\n          sublayers: 'sous-couches',\n          descriptionToggle: 'Basculer la description',\n          showDescription: 'Afficher la description',\n          hideDescription: 'Masquer la description',\n        },\n      },\n    };\n  }\n\n  /**\n   * Overrides the getConfig in order to return the right type.\n   * @returns {TypeCustomLegendConfig} The Geochart config\n   */\n  override getConfig(): TypeCustomLegendConfig {\n    // Redirect\n    return super.getConfig() as TypeCustomLegendConfig;\n  }\n\n  override onCreateButtonProps(): IconButtonPropsExtend {\n    // Button props\n    return {\n      id: `custom-legend`,\n      tooltip: 'CustomLegend.title',\n      tooltipPlacement: 'right',\n      children: <LegendIcon />,\n      visible: true,\n      'aria-label': 'CustomLegend.title',\n    };\n  }\n\n  override onCreateContentProps(): TypePanelProps {\n    // Panel props\n    const config = this.getConfig();\n    return {\n      title: config.title ?? 'CustomLegend.title',\n      icon: <LegendIcon />,\n      width: '350px',\n      status: config.isOpen,\n    };\n  }\n\n  override onCreateContent = (): JSX.Element => {\n    return <CustomLegendPanel config={this.getConfig()} />;\n  };\n\n  /**\n   * Function called when the plugin is removed, used for clean up\n   */\n  override onRemoved(): void {}\n}\n\nexport default CustomLegendPanelPlugin;\n\n// GV This if condition took over 3 days to investigate. It was giving errors on the app.geo.ca website with\n// GV some conflicting reacts being loaded on the page for some obscure reason.\n// Check if we're on the right react\nif (React === window.cgpv.reactUtilities.react) {\n  // Keep a reference to the Custom Legend Panel Plugin as part of the geoviewPlugins property stored in the window object\n  window.geoviewPlugins = window.geoviewPlugins || {};\n  window.geoviewPlugins['custom-legend'] = CustomLegendPanelPlugin;\n} // Else ignore, don't keep it on the window, wait for the right react load\n","/** Union type for all possible legend item types. */\nexport type TypeLegendItem = TypeLegendLayer | TypeHeaderLayer | TypeGroupLayer;\n\n/**  A description item with text and collapsed states */\nexport interface TypeDescription {\n  text: string;\n  collapsed?: boolean;\n}\n\n/** A reference to an existing layer from geoview-core. */\nexport interface TypeLegendLayer {\n  type: 'layer';\n  layerPath: string;\n}\n\n/** A header text item for organizing legend sections. */\nexport interface TypeHeaderLayer {\n  itemId?: string;\n  type: 'header';\n  text: string;\n  description?: TypeDescription;\n  fontSize?: number;\n  fontWeight?: 'normal' | 'bold';\n}\n\n/** A collapsible group containing other legend items. */\nexport interface TypeGroupLayer {\n  itemId?: string;\n  type: 'group';\n  text: string;\n  description?: TypeDescription;\n  collapsed?: boolean;\n  children: TypeLegendItem[];\n}\n\n/** Main configuration for custom legend. */\nexport interface TypeCustomLegendConfig {\n  isOpen: boolean;\n  title: string;\n  legendList: TypeLegendItem[];\n  version?: string;\n}\n\n/** Type guards for discriminating union types. */\nexport const isLegendLayer = (item: TypeLegendItem): item is TypeLegendLayer => {\n  return item.type === 'layer';\n};\n\nexport const isHeaderLayer = (item: TypeLegendItem): item is TypeHeaderLayer => {\n  return item.type === 'header';\n};\n\nexport const isGroupLayer = (item: TypeLegendItem): item is TypeGroupLayer => {\n  return item.type === 'group';\n};\n\n/**\n * Generate a unique ID for a legend item based on its content and position.\n * @param {TypeLegendItem} item - The legend item\n * @param {number} index - The item's position in the list\n * @param {string} parentPath - Optional parent path for nested items\n * @param {string} language - The language of the current text\n * @returns {string} A unique identifier\n */\nexport function generateLegendItemId(item: TypeLegendItem, index: number, language: 'en' | 'fr', parentPath: string = ''): string {\n  const basePath = parentPath ? `${parentPath}/` : '';\n\n  if (isLegendLayer(item)) {\n    // Use the layerPath as the unique ID\n    return `${basePath}${item.layerPath}`;\n  }\n\n  if (isHeaderLayer(item)) {\n    // Use itemId if provided, otherwise generate from text + index\n    return item.itemId || `${basePath}header-${item.text.toLowerCase().replace(/\\s+/g, '-')}-${index}`;\n  }\n\n  if (isGroupLayer(item)) {\n    // Use itemId if provided, otherwise generate from title + index\n    return item.itemId || `${basePath}group-${item.text.toLowerCase().replace(/\\s+/g, '-')}-${index}`;\n  }\n\n  // Fallback\n  return `${basePath}item-${index}`;\n}\n","import { useState } from 'react';\n\nimport type { TypeWindow } from 'geoview-core/core/types/global-types';\nimport { useAppDisplayLanguage } from 'geoview-core/core/stores/store-interface-and-intial-values/app-state';\nimport { getLocalizedMessage } from 'geoview-core/core/utils/utilities';\n\nimport type { getSxClasses } from '../custom-legend-style';\nimport type { TypeDescription } from '../custom-legend-types';\n\ninterface DescriptionTextProps {\n  description: TypeDescription;\n  sxClasses: ReturnType<typeof getSxClasses>;\n}\n\n/**\n * Renders a collapsible description text component.\n * @param {DescriptionTextProps} props - Component props\n * @returns {JSX.Element} The rendered description\n */\nexport function DescriptionText({ description, sxClasses }: DescriptionTextProps): JSX.Element {\n  const { cgpv } = window as TypeWindow;\n  const { ui } = cgpv;\n  const { Box, Typography, KeyboardArrowDownIcon, KeyboardArrowUpIcon, IconButton, Collapse } = ui.elements;\n\n  const displayLanguage = useAppDisplayLanguage();\n  const [expanded, setExpanded] = useState<boolean>(!description.collapsed);\n\n  const handleToggle = (): void => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Box>\n      <Box sx={sxClasses.descriptionContainer}>\n        <IconButton\n          size=\"small\"\n          onClick={handleToggle}\n          aria-label={getLocalizedMessage(displayLanguage, 'CustomLegend.descriptionToggle')}\n          sx={sxClasses.descriptionToggleButton}\n        >\n          {expanded ? <KeyboardArrowUpIcon fontSize=\"small\" /> : <KeyboardArrowDownIcon fontSize=\"small\" />}\n        </IconButton>\n        <Typography sx={sxClasses.descriptionToggleText} onClick={handleToggle}>\n          {expanded\n            ? getLocalizedMessage(displayLanguage, 'CustomLegend.hideDescription')\n            : getLocalizedMessage(displayLanguage, 'CustomLegend.showDescription')}\n        </Typography>\n      </Box>\n      <Collapse in={expanded} sx={sxClasses.descriptionCollapse}>\n        <Typography sx={sxClasses.descriptionText}>{description.text}</Typography>\n      </Collapse>\n    </Box>\n  );\n}\n"],"names":["LegendItem","_ref","item","sxClasses","itemPath","ListItem","window","cgpv","ui","elements","isLegendLayer","_jsx","sx","legendListItem","disablePadding","children","LegendLayerItem","isHeaderLayer","HeaderItem","isGroupLayer","GroupItem","LegendLayer","layerPath","CustomLegendPanel","props","legendList","config","_ui$elements","Box","List","theme","useTheme","useMemo","getSxClasses","appDisplayLanguage","useAppDisplayLanguage","container","className","map","index","itemId","generateLegendItemId","Typography","styleOverrides","_objectSpread","fontSize","concat","fontWeight","_jsxs","headerItem","headerText","text","description","DescriptionText","padding","display","flexDirection","height","overflowY","overflowX","background","palette","geoViewColor","bgColor","main","paddingRight","alignItems","marginLeft","backgroundColor","width","borderBottom","grey","light","geoViewFontSize","md","color","textColor","maxWidth","groupChildren","paddingLeft","marginTop","groupTitle","textWrapMode","lineHeight","textOverflow","groupItemButton","cursor","groupIcon","border","maxHeight","transform","borderRadius","justifyContent","groupSubLayerCount","margin","groupButtonRow","gap","groupCollapseButton","descriptionContainer","descriptionToggleRow","descriptionToggleButton","descriptionToggleText","fontStyle","dark","descriptionText","descriptionCollapse","AppBarPlugin","_AbstractPlugin","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_defineProperty","_inherits","_createClass","key","value","MapIcon","id","tooltip","tooltipPlacement","this","react","createElement","visible","title","icon","status","getConfig","isOpen","undefined","mapViewer","mapId","buttonProps","onCreateButtonProps","panelProps","onCreateContentProps","content","onCreateContent","buttonPanel","appBarApi","createAppbarPanel","removeAppbarPanel","buttonPanelId","AbstractPlugin","collectLayerPaths","paths","forEach","child","push","apply","_toConsumableArray","_item$collapsed","_reactUtilities$react","reactUtilities","useState","ListItemIcon","ListItemButton","IconButton","Collapse","LayerGroupIcon","VisibilityOutlinedIcon","VisibilityOffOutlinedIcon","KeyboardArrowDownIcon","KeyboardArrowUpIcon","displayLanguage","setOrToggleLayerVisibility","useMapStoreActions","_useState","collapsed","_useState2","_slicedToArray","setCollapsed","layerPaths","allVisible","useMapSelectorLayerArrayVisibility","currentPath","toLowerCase","replace","disableRipple","alignSelf","flex","noWrap","variant","getLocalizedMessage","onClick","newVisibility","size","prev","in","childId","CustomLegendPanelPlugin","_AppBarPlugin","schema","defaultConfig","en","CustomLegend","layer","sublayers","descriptionToggle","showDescription","hideDescription","fr","LegendIcon","_config$title","React","geoviewPlugins","type","language","parentPath","basePath","expanded","setExpanded","handleToggle"],"ignoreList":[],"sourceRoot":""}