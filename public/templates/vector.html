<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title><%= htmlWebpackPlugin.options.title %></title>
        <link rel="shortcut icon" href="./favicon.ico" />
        <meta name="msapplication-TileColor" content="#da532c" />
        <meta name="msapplication-config" content="./img/browserconfig.xml" />
        <meta name="theme-color" content="#ffffff" />
        <meta name="msapplication-TileColor" content="#da532c" />
        <meta name="theme-color" content="#ffffff" />
        <link
            href="https://fonts.googleapis.com/css?family=Roboto|Montserrat:200,300,400,900|Merriweather"
            rel="stylesheet"
            type="text/css"
        />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <div calss="header-table">
            <table>
                <tbody>
                    <tr>
                        <td><img class="header-logo" alt="logo" src="./img/Logo.png" /></td>
                        <td class="header-title">
                            <h1><strong>Vector</strong></h1>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <td><a href="./index.html">Main</a><br /></td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <td>This page is used to showcase how the viewer may implement different vector functions</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="toolbar">
            <button class="add-polyline-btn">Add Polyline</button>
            <button class="add-polygon-btn">Add Polygon</button>
            <button class="add-circle-btn">Add Circle</button>
            <button class="add-circle-marker-btn">Add Circle Marker</button>
            <button class="delete-group-btn">Delete Group</button>
        </div>
        <div
            id="mapWM"
            class="llwp-map"
            data-leaflet=" { 'name': 'Web Mercator', 'projection': 3857, 'zoom': 4, 'center': [60,-100], 'language': 'en-CA', 'basemapOptions': { 'id': 'transport', 'shaded': false, 'labeled': true } ,
            'layers': [
            ] } "
        ></div>
        <p><strong>Configuration Snippet:</strong></p>
        <div id="mapWMCS" class="panel"></div>
        <p><strong>Code Snippet:</strong></p>
        <div class="panel">
            cgpv.init(function () {<br />
            // create new geometry group<br />
            cgpv.api.map('mapWM').createGeometryGroup('myGroup');<br />
            deleteGeomtryGroup.addEventListener('click', function (e) {<br />
            // call an api function to delete the geometry group <br />
            cgpv.api.map('mapWM').deleteGeometryGroup('myGroup');<br />
            }); <br />
            function addPolyline(map) {<br />
            } <br />// call an api function to draw a polyline<br />
            const polyline = cgpv.api.map(map).addPolyline(<br />
            [<br />
            [45, -100],<br />
            [50, -105],<br />
            ],<br />
            {<br />
            stroke: true,<br />
            color: '#000',<br />
            weight: 5,<br />
            opacity: '0.8',<br />
            }<br />
            );<br />
            <br />
            <br />
            // check if a group already exists if not , create one <br />
            if (!cgpv.api.map(map).getGeometryGroup('myGroup')) { <br />
            cgpv.api.map('mapWM').createGeometryGroup('myGroup'); <br />
            } <br />
            cgpv.api.map(map).addToGeometryGroup('myGroup', polyline);<br />
            }<br />
            <br />
            function addPolygon(map) {<br />
            // call an api function to draw a polygon<br />
            const polygon = cgpv.api.map(map).addPolygon(<br />
            [<br />
            [50, -109.05],<br />
            [54, -109.03],<br />
            [54, -102.05],<br />
            [50, -102.04],<br />
            ],<br />
            {<br />
            stroke: true,<br />
            color: '#000',<br />
            weight: 5,<br />
            opacity: '0.8',<br />
            }<br />
            );<br />
            <br />
            <br />
            // check if a group already exists if not , create one <br />
            if (!cgpv.api.map(map).getGeometryGroup('myGroup')) { <br />
            cgpv.api.map('mapWM').createGeometryGroup('myGroup'); <br />
            } <br />
            cgpv.api.map(map).addToGeometryGroup('myGroup', polygon);<br />
            }<br />
            <br />
            function addCircle(map) {<br />
            // call an api function to draw a polygon<br />
            const circle = cgpv.api.map(map).addCircle(50, -109, 200, {<br />
            color: 'red',<br />
            fillColor: '#f03',<br />
            fillOpacity: 0.5,<br />
            radius: 50.0,<br />
            });<br />
            <br />
            <br />
            // check if a group already exists if not , create one <br />
            if (!cgpv.api.map(map).getGeometryGroup('myGroup')) { <br />
            cgpv.api.map('mapWM').createGeometryGroup('myGroup'); <br />
            } <br />
            cgpv.api.map(map).addToGeometryGroup('myGroup', circle);<br />
            }<br />
            <br />
            function addCircleMarker(map) {<br />
            // call an api function to draw a polygon<br />
            const circleMarker = cgpv.api.map(map).addCircleMarker(70, -109, 5, {<br />
            color: 'red',<br />
            fillColor: '#f03',<br />
            fillOpacity: 0.5,<br />
            radius: 50.0,<br />
            });<br />
            <br />
            <br />
            // check if a group already exists if not , create one <br />
            if (!cgpv.api.map(map).getGeometryGroup('myGroup')) { <br />
            cgpv.api.map('mapWM').createGeometryGroup('myGroup'); <br />
            } <br />
            cgpv.api.map(map).addToGeometryGroup('myGroup', circleMarker);<br />
            }<br />
        </div>
        <br />

        <script>
            function addPolyline(map) {
                // call an api function to draw a polyline
                const polyline = cgpv.api.map(map).addPolyline(
                    [
                        [45, -100],
                        [50, -105],
                    ],
                    {
                        stroke: true,
                        color: '#000',
                        weight: 5,
                        opacity: '0.8',
                    }
                );

                // check if a group already exists if not , create one
                if (!cgpv.api.map(map).getGeometryGroup('myGroup')) {
                    cgpv.api.map('mapWM').createGeometryGroup('myGroup');
                }
                cgpv.api.map(map).addToGeometryGroup('myGroup', polyline);
            }

            function addPolygon(map) {
                // call an api function to draw a polygon
                const polygon = cgpv.api.map(map).addPolygon(
                    [
                        [50, -109.05],
                        [54, -109.03],
                        [54, -102.05],
                        [50, -102.04],
                    ],
                    {
                        stroke: true,
                        color: '#000',
                        weight: 5,
                        opacity: '0.8',
                    }
                );

                // check if a group already exists if not , create one
                if (!cgpv.api.map(map).getGeometryGroup('myGroup')) {
                    cgpv.api.map('mapWM').createGeometryGroup('myGroup');
                }
                cgpv.api.map(map).addToGeometryGroup('myGroup', polygon);
            }

            function addCircle(map) {
                // call an api function to draw a polygon
                const circle = cgpv.api.map(map).addCircle(50, -109, 200, {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.5,
                    radius: 50.0,
                });

                // check if a group already exists if not , create one
                if (!cgpv.api.map(map).getGeometryGroup('myGroup')) {
                    cgpv.api.map('mapWM').createGeometryGroup('myGroup');
                }
                cgpv.api.map(map).addToGeometryGroup('myGroup', circle);
            }

            function addCircleMarker(map) {
                // call an api function to draw a polygon
                const circleMarker = cgpv.api.map(map).addCircleMarker(70, -109, 5, {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.5,
                    radius: 50.0,
                });

                // check if a group already exists if not , create one
                if (!cgpv.api.map(map).getGeometryGroup('myGroup')) {
                    cgpv.api.map('mapWM').createGeometryGroup('myGroup');
                }
                cgpv.api.map(map).addToGeometryGroup('myGroup', circleMarker);
            }

            // initialize cgpv and api events, a callback is optional, used if calling api's after the rendering is ready
            cgpv.init(function () {
                console.log('api is ready');

                // create new geometry group
                cgpv.api.map('mapWM').createGeometryGroup('myGroup');

                // get addPolyline button element for WM map
                var addPolylineBtn = document.getElementsByClassName('add-polyline-btn')[0];

                // add event handler to the add polyline button
                addPolylineBtn.addEventListener('click', function (e) {
                    addPolyline('mapWM');
                });

                // get addPolygon button element for WM map
                var addPolygonBtn = document.getElementsByClassName('add-polygon-btn')[0];

                // add event handler to the add Polygon button
                addPolygonBtn.addEventListener('click', function (e) {
                    addPolygon('mapWM');
                });

                // get addCircle button element for WM map
                var addCircleBtn = document.getElementsByClassName('add-circle-btn')[0];

                // add event handler to the add circle button
                addCircleBtn.addEventListener('click', function (e) {
                    addCircle('mapWM');
                });

                // get add circle marker button element for WM map
                var addCircleMarkerBtn = document.getElementsByClassName('add-circle-marker-btn')[0];

                // add event handler to the add circle marker button
                addCircleMarkerBtn.addEventListener('click', function (e) {
                    addCircleMarker('mapWM');
                });

                // get deleteGeomtryGroup button element for WM map
                var deleteGeomtryGroup = document.getElementsByClassName('delete-group-btn')[0];

                //  add event handler to the delete geometry group button
                deleteGeomtryGroup.addEventListener('click', function (e) {
                    // call an api function to  delete the geometry group
                    cgpv.api.map('mapWM').deleteGeometryGroup('myGroup');
                });

                // inject configuration snippet inside panel
                for (j = 0; j < document.getElementsByClassName('llwp-map').length; j++) {
                    let configSnippet = '';
                    let mapID = document.getElementsByClassName('llwp-map')[j].id;
                    for (i = 0; i < document.getElementById(mapID).attributes.length; i++) {
                        configSnippet +=
                            document.getElementById(mapID).attributes[i].nodeName +
                            ': "' +
                            document.getElementById(mapID).attributes[i].nodeValue +
                            '" ';
                    }
                    document.getElementById(mapID + 'CS').innerHTML = configSnippet;
                }
            });
        </script>
    </body>
</html>
